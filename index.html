<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Zexith Studios | Roblox Development</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        :root {
            --red: #ff1b1b;
            --blue: #00a2ff;
            --yellow: #ffd700;
            --white: #ffffff;
            --purple: #a259ff;
            --gray: #888888;
            --dark: #050000;
            --dark2: #0e0e0e;
            --dark3: #161616;
            --accent: var(--white);
            /* Default to white (Scripter) */
            --transition-fast: 0.2s;
            --transition-normal: 0.3s;
            --transition-slow: 0.5s;
            --easing: cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* CURSOR LOGIC FOR DESKTOP ONLY */
        @media (hover: hover) and (pointer: fine) {
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
                font-family: 'Segoe UI', system-ui, sans-serif;
                cursor: none !important;
            }

            body {
                cursor: none !important;
            }

            /* EXCEPTION: Show cursor on Language Intro Screen */
            #language-intro-screen,
            #language-intro-screen * {
                cursor: default !important;
            }

            /* EXCEPTION: Allow pointer on buttons inside intro */
            #language-intro-screen button,
            #language-intro-screen .intro-lang-btn {
                cursor: pointer !important;
            }

            /* Toggle class to disable custom cursor globally via Settings */
            body.system-cursor * {
                cursor: auto !important;
            }

            body.system-cursor .custom-cursor {
                display: none !important;
            }
        }

        /* DEFAULT RESET FOR MOBILE/TOUCH */
        @media (hover: none) or (pointer: coarse) {
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
                font-family: 'Segoe UI', system-ui, sans-serif;
            }
        }

        /* SMOOTH SCROLLING ENABLED HERE */
        html {
            scroll-behavior: smooth;
        }

        * {
            scrollbar-width: thin;
            scrollbar-color: rgba(255, 255, 255, 0.2) rgba(255, 255, 255, 0.05);
        }

        *::-webkit-scrollbar {
            width: 10px;
            height: 10px;
        }

        *::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }

        *::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            transition: background var(--transition-normal) var(--easing);
        }

        *::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        body {
            background: #000;
            /* Solid black base, canvas handles the rest */
            color: #eee;
            overflow-x: hidden;
            transition: background 0.5s ease;
            position: relative;
        }

        /* 3D CANVAS BACKGROUND */
        #bg-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            /* Behind everything */
            pointer-events: none;
        }

        /* THEME OVERRIDES */
        body.theme-ui {
            --accent: #ff1b1b;
        }

        body.theme-scripter {
            --accent: #ffffff;
            --dark: #000000;
            --dark2: #0a0a0a;
            --dark3: #151515;
        }

        body.theme-builder {
            --accent: #ffd700;
        }

        nav {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            padding: 20px 5%;
            background: rgba(5, 0, 0, 0.4);
            backdrop-filter: blur(20px) saturate(180%);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        body.theme-scripter nav {
            background: rgba(0, 0, 0, 0.6);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        nav.scrolled {
            padding: 12px 5%;
            background: rgba(5, 0, 0, 0.8);
            backdrop-filter: blur(30px) saturate(200%);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.8), 0 0 20px rgba(255, 27, 27, 0.1);
            border-bottom: 1px solid rgba(255, 27, 27, 0.3);
        }

        body.theme-scripter nav.scrolled {
            background: rgba(0, 0, 0, 0.8);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.8), 0 0 20px rgba(255, 255, 255, 0.1);
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
        }

        /* 9. GRUPO DE MARCA Y AVATAR (NUEVO) */
        .nav-brand-group {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .nav-user-avatar {
            width: 38px;
            height: 38px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid var(--accent);
            color: var(--accent);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
            cursor: default;
        }

        .nav-user-avatar:hover {
            box-shadow: 0 0 20px var(--accent);
            transform: scale(1.1);
            background: var(--accent);
            color: #000;
        }

        .nav-logo {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--accent);
            text-shadow: 0 0 20px var(--accent), 0 0 40px var(--accent);
            letter-spacing: 3px;
            position: relative;
            animation: logoFloat 3s ease-in-out infinite;
        }

        @keyframes logoFloat {

            0%,
            100% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-3px);
            }
        }

        .nav-logo::before {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--accent), transparent);
            animation: logoGlow 2s ease-in-out infinite;
        }

        @keyframes logoGlow {

            0%,
            100% {
                opacity: 0.3;
            }

            50% {
                opacity: 1;
            }
        }

        .nav-links {
            display: flex;
            gap: 30px;
            list-style: none;
            align-items: center;
        }

        .nav-links a {
            color: #aaa;
            text-decoration: none;
            font-size: 0.95rem;
            font-weight: 600;
            transition: all 0.3s ease;
            position: relative;
            padding: 8px 0;
        }

        .nav-links a::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 2px;
            background: var(--accent);
            box-shadow: 0 0 10px var(--accent);
            transition: width 0.3s ease;
        }

        .nav-links a.active {
            color: var(--accent);
        }

        .nav-links a.active::before {
            width: 100%;
        }

        .nav-links a:hover {
            color: white;
        }

        .nav-links a:hover::before {
            width: 100%;
        }

        /* 3. MEJORA DEL BOTÓN DE CAMBIAR PERFIL */
        .nav-profile-btn {
            background: var(--accent);
            color: #000 !important;
            /* Texto negro para contraste */
            padding: 8px 20px !important;
            border-radius: 6px;
            font-weight: 800 !important;
            text-transform: uppercase;
            font-size: 0.8rem !important;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: none;
            box-shadow: 0 0 15px var(--accent);
            letter-spacing: 1px;
            display: inline-block;
        }

        .nav-profile-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 30px var(--accent);
            filter: brightness(1.2);
        }

        /* 2. BOTÓN SETTINGS (SIN ANIMACIÓN POR DEFECTO) */
        .settings-btn {
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--accent);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-left: 20px;
            position: relative;
            overflow: hidden;
        }

        .settings-btn svg {
            width: 20px;
            height: 20px;
            fill: var(--accent);
            transition: transform 0.4s ease;
            /* Solo transición suave */
        }

        .settings-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--accent);
            box-shadow: 0 0 15px var(--accent);
        }

        .settings-btn:hover svg {
            transform: rotate(90deg);
            /* SOLO ROTA EN HOVER */
        }

        .hamburger {
            display: none;
            flex-direction: column;
            gap: 6px;
            cursor: pointer;
            z-index: 1001;
            padding: 10px;
        }

        .hamburger span {
            width: 28px;
            height: 2px;
            background: var(--accent);
            transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
            border-radius: 3px;
            box-shadow: 0 0 10px var(--accent);
            transform-origin: center;
        }

        .hamburger.active span:nth-child(1) {
            transform: translateY(8px) rotate(45deg);
        }

        .hamburger.active span:nth-child(2) {
            opacity: 0;
            transform: scaleX(0);
        }

        .hamburger.active span:nth-child(3) {
            transform: translateY(-8px) rotate(-45deg);
        }

        /* ---- SELECTION SCREEN ---- */
        #selection-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            z-index: 100;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            opacity: 1;
            transition: opacity var(--transition-slow) var(--easing);
            overflow: hidden;
            padding: 20px;
            position: relative;
        }

        /* Subtle Overlay for readability on selection screen */
        #selection-screen::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, rgba(0, 0, 0, 0.3) 0%, rgba(0, 0, 0, 0.8) 100%);
            z-index: -1;
        }

        .select-title,
        .profile-tabs,
        .profiles-container {
            position: relative;
            z-index: 3;
        }

        #selection-screen.fade-out {
            opacity: 0;
            pointer-events: none;
        }

        .select-title {
            font-size: clamp(1.5rem, 4vw, 2rem);
            margin-bottom: 30px;
            text-transform: uppercase;
            color: #fff;
            letter-spacing: 2px;
            width: 100%;
            text-align: center;
            line-height: 1.2;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
            animation: titleGlow 3s ease-in-out infinite;
        }

        @keyframes titleGlow {

            0%,
            100% {
                text-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
            }

            50% {
                text-shadow: 0 0 30px rgba(255, 255, 255, 0.5), 0 0 40px rgba(255, 255, 255, 0.3);
            }
        }

        .profile-tabs {
            display: flex;
            gap: 20px;
            margin-bottom: 40px;
            overflow-x: auto;
            overflow-y: hidden;
            padding: 20px;
            scroll-behavior: smooth;
            -webkit-overflow-scrolling: touch;
            max-width: 95vw;
            width: 100%;
            justify-content: center;
        }

        .profile-tabs::-webkit-scrollbar {
            height: 8px;
        }

        .profile-tabs::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 10px;
            margin: 0 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .profile-tabs::-webkit-scrollbar-thumb {
            background: linear-gradient(90deg, rgba(255, 255, 255, 0.4), rgba(255, 255, 255, 0.6));
            border-radius: 10px;
            border: 2px solid rgba(0, 0, 0, 0.3);
            transition: background var(--transition-normal) var(--easing);
        }

        .profile-tabs::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(90deg, rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.8));
        }

        .tab-btn {
            padding: 25px 40px;
            background: rgba(14, 14, 14, 0.8);
            backdrop-filter: blur(10px);
            border: 2px solid #444;
            border-radius: 12px;
            color: #aaa;
            font-size: 1rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            cursor: pointer;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
            white-space: nowrap;
            flex-shrink: 0;
            min-width: 160px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .tab-btn::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 0;
            background: linear-gradient(to top, rgba(255, 255, 255, 0.05), transparent);
            transition: height 0.4s ease;
        }

        .tab-btn:hover {
            border-color: #555;
            color: #bbb;
        }

        .tab-btn:hover::before {
            height: 100%;
        }

        .tab-btn.scripter:hover {
            border-color: #ffffff;
            color: #ffffff;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.2);
        }

        .tab-btn.ui-designer:hover {
            border-color: #ff1b1b;
            color: #ff1b1b;
            box-shadow: 0 0 15px rgba(255, 27, 27, 0.2);
        }

        .tab-btn.builder:hover {
            border-color: #ffd700;
            color: #ffd700;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.2);
        }

        .tab-btn.active {
            background: linear-gradient(135deg, rgba(22, 22, 22, 0.9), rgba(14, 14, 14, 0.9));
            border-color: var(--tab-color);
            color: var(--tab-color);
        }

        .tab-btn.scripter.active {
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.2);
        }

        .tab-btn.ui-designer.active {
            box-shadow: 0 0 20px rgba(255, 27, 27, 0.2);
        }

        .tab-btn.builder.active {
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.2);
        }

        .tab-btn.scripter {
            --tab-color: #ffffff;
        }

        .tab-btn.ui-designer {
            --tab-color: #ff1b1b;
        }

        .tab-btn.builder {
            --tab-color: #ffd700;
        }

        .tab-btn.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 100%;
            height: 3px;
            background: var(--tab-color);
            box-shadow: 0 0 15px var(--tab-color);
        }

        .profiles-container {
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
            justify-content: center;
            padding: 20px;
            align-items: center;
        }

        .profile-card {
            width: 280px;
            height: 320px;
            background: rgba(14, 14, 14, 0.85);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 1px solid #333;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: all var(--transition-slow) var(--easing);
            z-index: 200;
            opacity: 0;
            transform: scale(0.9) translateY(20px);
        }

        .profile-card.active {
            display: flex;
            animation: profileFadeIn 0.6s var(--easing) forwards;
        }

        @keyframes profileFadeIn {
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        .profile-card:hover {
            transform: translateY(-10px) scale(1.02);
            background: rgba(17, 17, 17, 0.95);
        }

        .profile-card.ui:hover {
            border-color: var(--red);
            box-shadow: 0 0 30px rgba(255, 27, 27, 0.4);
        }

        .profile-card.scripter:hover {
            border-color: #ffffff;
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.4);
        }

        .profile-card.builder:hover {
            border-color: #ffd700;
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.4);
        }

        .profile-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: #222;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
        }

        .profile-card h3 {
            font-size: 1.5rem;
            color: white;
            margin-bottom: 5px;
        }

        .profile-card span {
            font-size: 0.9rem;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* LANGUAGE INTRO SCREEN (NEW) */
        #language-intro-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, #111 0%, #000 100%);
            z-index: 1000000;
            /* Highest priority */
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            transition: opacity 0.8s ease;
        }

        #language-intro-screen.fade-out {
            opacity: 0;
            pointer-events: none;
        }

        .lang-intro-content {
            text-align: center;
            animation: fadeInLang 1s ease-out forwards;
            opacity: 0;
            transform: translateY(20px);
        }

        @keyframes fadeInLang {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .lang-intro-title {
            color: #fff;
            font-size: clamp(1.5rem, 5vw, 2.5rem);
            font-weight: 300;
            letter-spacing: 8px;
            margin-bottom: 50px;
            text-transform: uppercase;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            padding-bottom: 20px;
            display: inline-block;
        }

        .lang-intro-options {
            display: flex;
            gap: 40px;
            justify-content: center;
            align-items: center;
        }

        .intro-lang-btn {
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #888;
            padding: 15px 40px;
            font-size: 1rem;
            letter-spacing: 3px;
            cursor: pointer;
            transition: all 0.4s ease;
            border-radius: 4px;
            text-transform: uppercase;
            font-weight: 600;
        }

        .intro-lang-btn:hover {
            border-color: #fff;
            color: #fff;
            background: rgba(255, 255, 255, 0.05);
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.1);
            transform: scale(1.05);
        }

        .lang-intro-separator {
            width: 1px;
            height: 40px;
            background: rgba(255, 255, 255, 0.1);
        }

        /* LOADER */
        .loader-wrapper {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0a0a0a 0%, #000000 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 999999;
            transition: opacity 0.5s ease;
            overflow: hidden;
        }

        .loader-content {
            position: relative;
            z-index: 2;
            text-align: center;
        }

        .loader-text {
            font-size: clamp(2.5rem, 8vw, 4.5rem);
            font-weight: 800;
            text-transform: uppercase;
            color: #fff;
            letter-spacing: 12px;
            position: relative;
            opacity: 0;
            animation: logoFadeIn 0.8s ease forwards, logoGlow 3s ease-in-out infinite;
            margin-bottom: 60px;
        }

        @keyframes logoFadeIn {
            to {
                opacity: 1;
            }
        }

        .loader-dots {
            display: flex;
            gap: 12px;
            justify-content: center;
        }

        .loader-dot {
            width: 10px;
            height: 10px;
            background: white;
            border-radius: 50%;
            animation: dotPulse 1.4s ease-in-out infinite;
        }

        .loader-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .loader-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes dotPulse {

            0%,
            100% {
                transform: scale(0.6);
                opacity: 0.4;
            }

            50% {
                transform: scale(1.2);
                opacity: 1;
            }
        }

        /* COMING SOON SCREEN */
        .coming-soon-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(20px);
            z-index: 100000;
            display: none;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            opacity: 0;
            transition: opacity 0.5s ease;
            overflow: hidden;
        }

        .coming-soon-screen.active {
            display: flex;
            opacity: 1;
        }

        .coming-soon-content {
            text-align: center;
            animation: floatComingSoon 3s ease-in-out infinite;
            position: relative;
            z-index: 2;
        }

        @keyframes floatComingSoon {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-20px);
            }
        }

        .coming-soon-title {
            font-size: clamp(3rem, 12vw, 6rem);
            font-weight: 800;
            color: #ffd700;
            text-shadow: 0 0 40px #ffd700, 0 0 80px #ffd700, 0 0 120px rgba(255, 215, 0, 0.5);
            margin-bottom: 20px;
            letter-spacing: 8px;
            text-transform: uppercase;
            animation: titlePulse 2s ease-in-out infinite;
        }

        @keyframes titlePulse {

            0%,
            100% {
                text-shadow: 0 0 40px #ffd700, 0 0 80px #ffd700, 0 0 120px rgba(255, 215, 0, 0.5);
            }

            50% {
                text-shadow: 0 0 60px #ffd700, 0 0 100px #ffd700, 0 0 140px rgba(255, 215, 0, 0.7);
            }
        }

        .coming-soon-subtitle {
            font-size: clamp(1.2rem, 4vw, 2rem);
            color: #999;
            font-weight: 600;
            letter-spacing: 3px;
            text-transform: uppercase;
            margin-bottom: 30px;
        }

        .coming-soon-back {
            margin-top: 50px;
            padding: 15px 40px;
            background: rgba(255, 215, 0, 0.1);
            border: 2px solid #ffd700;
            border-radius: 12px;
            color: #ffd700;
            font-weight: 700;
            text-transform: uppercase;
            cursor: pointer;
            transition: 0.3s;
            letter-spacing: 2px;
            position: relative;
            overflow: hidden;
            z-index: 1;
        }

        .coming-soon-back:hover {
            background: #ffd700;
            color: #000;
            box-shadow: 0 0 40px #ffd700;
        }

        /* MAIN SITE */
        #main-site {
            display: none;
            opacity: 0;
            transition: opacity 0.5s ease;
            padding-top: 80px;
        }

        #main-site.visible {
            opacity: 1;
        }

        header {
            min-height: 80vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 20px;
        }

        .hero h1 {
            font-size: clamp(2.5rem, 10vw, 4.5rem);
            font-weight: 800;
            color: var(--accent);
            text-shadow: 0 0 30px var(--accent);
            margin-bottom: 10px;
        }

        .hero p {
            margin-top: 20px;
            color: #ccc;
            font-size: clamp(1rem, 4vw, 1.35rem);
        }

        /* 8. OWNER STATUS STYLING */
        .owner-status-display {
            font-size: 1.1rem;
            color: #fff;
            background: rgba(255, 255, 255, 0.1);
            padding: 8px 16px;
            border-radius: 20px;
            margin-top: 15px;
            display: inline-block;
            border: 1px solid var(--accent);
            box-shadow: 0 0 10px var(--accent);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn {
            display: inline-block;
            margin-top: 40px;
            padding: 16px 40px;
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid var(--accent);
            border-radius: 12px;
            color: white;
            text-decoration: none;
            font-weight: 700;
            text-transform: uppercase;
            box-shadow: 0 0 15px var(--accent);
            transition: 0.3s;
        }

        .btn:hover {
            background: var(--accent);
            box-shadow: 0 0 40px var(--accent);
            transform: translateY(-3px);
        }

        .badge {
            padding: 8px 16px;
            border: 1px solid;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }

        .section-title {
            text-align: center;
            font-size: 2.5rem;
            color: #fff;
            margin-bottom: 50px;
            display: inline-block;
            width: 100%;
        }

        .section-title span {
            color: var(--accent);
            border-bottom: 3px solid var(--accent);
        }

        .team-grid {
            display: flex;
            justify-content: center;
            gap: 40px;
            flex-wrap: wrap;
            margin-bottom: 80px;
        }

        .team-member {
            background: linear-gradient(145deg, rgba(22, 22, 22, 0.9), rgba(14, 14, 14, 0.9));
            backdrop-filter: blur(10px);
            padding: 40px;
            border-radius: 24px;
            border: 2px solid #222;
            width: 350px;
            text-align: center;
            position: relative;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        body.theme-scripter .team-member {
            background: linear-gradient(145deg, rgba(15, 15, 15, 0.9), rgba(5, 5, 5, 0.9));
            border: 2px solid #1a1a1a;
        }

        .team-member:hover {
            transform: translateY(-10px) scale(1.02);
            border-color: var(--accent);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.7), 0 0 40px rgba(255, 27, 27, 0.2);
        }

        body.theme-scripter .team-member:hover {
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.7), 0 0 40px rgba(255, 255, 255, 0.2);
        }

        .team-avatar-container {
            position: relative;
            width: 120px;
            height: 120px;
            margin: 0 auto 25px;
        }

        .team-avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            font-weight: 800;
            position: relative;
            z-index: 2;
            transition: 0.4s;
        }

        .avatar-ring {
            position: absolute;
            top: -10px;
            left: -10px;
            width: 140px;
            height: 140px;
            border: 3px solid var(--accent);
            border-radius: 50%;
            border-top-color: transparent;
            border-right-color: transparent;
            animation: rotateRing 3s linear infinite;
            opacity: 0;
            transition: 0.4s;
        }

        .team-member:hover .avatar-ring {
            opacity: 1;
        }

        @keyframes rotateRing {
            to {
                transform: rotate(360deg);
            }
        }

        .member-role {
            font-size: 0.85rem;
            text-transform: uppercase;
            color: var(--accent);
            margin-bottom: 10px;
            font-weight: 700;
            letter-spacing: 2px;
        }

        .member-name {
            font-size: 1.8rem;
            color: white;
            margin: 10px 0 15px;
            font-weight: 800;
        }

        .member-description {
            font-size: 0.95rem;
            color: #999;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .member-socials {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }

        .social-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid #333;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #777;
            transition: 0.3s;
            cursor: pointer;
            font-size: 1.2rem;
        }

        .social-icon:hover {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
            box-shadow: 0 0 20px var(--accent);
            transform: translateY(-3px);
        }

        section {
            padding: 80px 8%;
            position: relative;
            z-index: 10;
        }

        .tools {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 30px;
        }

        .tool {
            position: relative;
            transition: transform 0.4s;
        }

        .tool:hover {
            transform: translateY(-10px);
        }

        .edge-line {
            position: absolute;
            background: var(--accent);
            box-shadow: 0 0 20px var(--accent);
            transition: 0.2s;
            z-index: 2;
        }

        .edge-top {
            top: 0;
            left: 0;
            height: 2px;
            width: 0;
        }

        .tool:hover .edge-top {
            width: 100%;
        }

        .edge-right {
            top: 0;
            right: 0;
            width: 2px;
            height: 0;
            transition-delay: 0.2s;
        }

        .tool:hover .edge-right {
            height: 100%;
        }

        .edge-bottom {
            bottom: 0;
            right: 0;
            height: 2px;
            width: 0;
            transition-delay: 0.4s;
        }

        .tool:hover .edge-bottom {
            width: 100%;
        }

        .edge-left {
            bottom: 0;
            left: 0;
            width: 2px;
            height: 0;
            transition-delay: 0.6s;
        }

        .tool:hover .edge-left {
            height: 100%;
        }

        .tool-content {
            background: linear-gradient(145deg, rgba(22, 22, 22, 0.9), rgba(14, 14, 14, 0.9));
            backdrop-filter: blur(10px);
            padding: 40px 30px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            gap: 20px;
            z-index: 1;
            position: relative;
        }

        .tool-icon {
            width: 85px;
            height: 85px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .tool-icon img,
        .tool-icon svg {
            width: 100%;
            height: 100%;
            object-fit: contain;
            filter: grayscale(100%) opacity(0.7);
            transition: 0.5s;
        }

        .tool:hover .tool-icon img,
        .tool:hover .tool-icon svg {
            filter: grayscale(0%) opacity(1) drop-shadow(0 0 10px var(--accent));
            transform: scale(1.1);
        }

        .tool h4 {
            color: white;
            font-size: 1.4rem;
            transition: 0.3s;
        }

        .tool:hover h4 {
            color: var(--accent);
            text-shadow: 0 0 10px var(--accent);
        }

        .tool span {
            font-size: .9rem;
            color: #aaa;
            line-height: 1.4;
        }

        .category-filters {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 10px 25px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid #555;
            border-radius: 25px;
            color: #aaa;
            cursor: pointer;
            transition: all var(--transition-normal) var(--easing);
            font-size: 0.9rem;
            font-weight: 600;
            line-height: 1.2;
            backdrop-filter: blur(5px);
        }

        .filter-btn:hover {
            border-color: var(--accent);
            color: var(--accent);
            background: rgba(0, 0, 0, 0.5);
        }

        .filter-btn.active {
            background: rgba(255, 27, 27, 0.15);
            color: var(--accent);
            border-color: var(--accent);
            box-shadow: 0 0 15px rgba(255, 27, 27, 0.2);
        }

        body.theme-scripter .filter-btn.active {
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.2);
        }

        /* IDEAS FORM & INTERFACE (Dynamic Color) */
        #ideas-interface {
            max-width: 1000px;
            margin: 0 auto;
            display: none;
            flex-direction: column;
            gap: 40px;
        }

        .ideas-form-card {
            background: linear-gradient(145deg, rgba(20, 20, 20, 0.9), rgba(10, 10, 10, 0.9));
            backdrop-filter: blur(10px);
            border: 2px solid var(--accent);
            /* CHANGED: var(--purple) -> var(--accent) */
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
        }

        .ideas-form-card h3 {
            color: var(--accent);
            /* CHANGED */
            font-size: 1.5rem;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-align: center;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .idea-input {
            width: 100%;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid #444;
            border-radius: 12px;
            padding: 15px;
            color: white;
            font-size: 1rem;
            transition: 0.3s;
        }

        .idea-input:focus {
            border-color: var(--accent);
            /* CHANGED */
            outline: none;
            background: rgba(255, 255, 255, 0.05);
            box-shadow: 0 0 15px var(--accent);
            /* CHANGED */
        }

        textarea.idea-input {
            resize: vertical;
            min-height: 100px;
        }

        .submit-idea-btn {
            width: 100%;
            padding: 15px;
            background: var(--accent);
            /* CHANGED */
            border: none;
            border-radius: 12px;
            color: #000;
            /* Contrast text for bright backgrounds */
            font-weight: 700;
            text-transform: uppercase;
            cursor: pointer;
            transition: 0.3s;
            letter-spacing: 1px;
        }

        .submit-idea-btn:hover {
            background: white;
            color: black;
            box-shadow: 0 0 20px var(--accent);
            /* CHANGED */
            transform: translateY(-2px);
        }

        .ideas-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }

        .idea-card {
            background: rgba(15, 15, 15, 0.8);
            border: 1px solid #333;
            border-radius: 16px;
            padding: 25px;
            transition: 0.3s;
            position: relative;
            overflow: hidden;
        }

        .idea-card:hover {
            border-color: var(--accent);
            /* CHANGED */
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5), 0 0 20px rgba(0, 0, 0, 0.3);
        }

        .idea-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--accent);
            /* CHANGED */
        }

        .idea-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .idea-user {
            font-size: 0.8rem;
            color: #888;
            font-weight: 600;
            text-transform: uppercase;
        }

        .idea-title {
            color: white;
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .idea-desc {
            color: #aaa;
            font-size: 0.95rem;
            line-height: 1.6;
        }

        .idea-footer {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: flex-end;
        }

        /* 5. IDEA LIKE BUTTON STYLE */
        .idea-likes {
            color: var(--accent);
            font-size: 0.9rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .idea-like-btn {
            background: transparent;
            border: 1px solid #333;
            color: #888;
            padding: 5px 12px;
            border-radius: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: 0.3s;
            font-size: 0.9rem;
        }

        .idea-like-btn:hover,
        .idea-like-btn.liked {
            border-color: var(--red);
            color: var(--red);
            background: rgba(255, 27, 27, 0.1);
        }

        .idea-like-btn svg {
            width: 14px;
            height: 14px;
            fill: none;
            stroke: currentColor;
            stroke-width: 2;
            transition: 0.3s;
        }

        .idea-like-btn.liked svg {
            fill: var(--red);
        }

        /* 6. IDEA TRANSLATE BUTTON */
        .idea-translate-btn {
            background: transparent;
            border: none;
            color: #666;
            font-size: 0.75rem;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: 0.3s;
            margin-right: auto;
        }

        .idea-translate-btn:hover {
            color: var(--accent);
            text-decoration: underline;
        }

        .delete-idea-btn {
            background: transparent;
            border: none;
            color: #ff4444;
            cursor: pointer;
            font-size: 1.1rem;
            margin-left: 10px;
            opacity: 0.6;
            transition: 0.3s;
            padding: 5px;
            border-radius: 50%;
        }

        .delete-idea-btn:hover {
            opacity: 1;
            background: rgba(255, 68, 68, 0.1);
            transform: scale(1.1);
            text-shadow: 0 0 10px #ff4444;
        }

        /* USERNAME MODAL UPDATED FOR LOGIN/REGISTER */
        #username-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 20000;
            display: none;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(20px);
        }

        #username-modal.active {
            display: flex;
        }

        .username-content {
            background: linear-gradient(145deg, #111, #000);
            border: 2px solid var(--white);
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 0 50px rgba(255, 255, 255, 0.1);
        }

        .username-content h2 {
            color: white;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .input-group {
            position: relative;
            margin-bottom: 15px;
            width: 100%;
        }

        .username-content input {
            width: 100%;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid #333;
            border-radius: 8px;
            color: white;
            font-size: 1.1rem;
            text-align: center;
            outline: none;
            transition: 0.3s;
        }

        .username-content input:focus {
            border-color: var(--white);
            background: rgba(255, 255, 255, 0.1);
        }

        /* SHOW PASSWORD TOGGLE */
        .password-group input {
            padding-right: 45px;
            /* Space for eye icon */
        }

        .toggle-password {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
            opacity: 0.5;
            transition: 0.3s;
            font-size: 1.2rem;
            user-select: none;
        }

        .toggle-password:hover {
            opacity: 1;
            color: var(--white);
        }

        .username-content button {
            width: 100%;
            padding: 12px 30px;
            background: white;
            color: black;
            border: none;
            font-weight: 700;
            text-transform: uppercase;
            cursor: pointer;
            border-radius: 8px;
            font-size: 1rem;
            margin-top: 10px;
            transition: 0.3s;
        }

        .username-content button:hover {
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
        }

        .switch-auth-mode {
            margin-top: 20px;
            color: #888;
            font-size: 0.85rem;
            cursor: pointer;
            text-decoration: underline;
            transition: 0.3s;
        }

        .switch-auth-mode:hover {
            color: white;
        }

        /* DELETE CONFIRMATION MODAL */
        #delete-confirm-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 20001;
            /* Higher than others */
            display: none;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(10px);
        }

        #delete-confirm-modal.active {
            display: flex;
        }

        .delete-confirm-content {
            background: linear-gradient(145deg, #220000, #000);
            border: 2px solid var(--red);
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            width: 90%;
            max-width: 450px;
            box-shadow: 0 0 50px rgba(255, 27, 27, 0.3);
            transform: scale(0.9);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        #delete-confirm-modal.active .delete-confirm-content {
            transform: scale(1);
        }

        .delete-confirm-content h2 {
            color: var(--red);
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-shadow: 0 0 20px var(--red);
        }

        .delete-confirm-content p {
            color: #ccc;
            margin-bottom: 30px;
            font-size: 1.1rem;
        }

        .delete-actions {
            display: flex;
            gap: 20px;
            justify-content: center;
        }

        .delete-btn-confirm {
            padding: 12px 30px;
            background: var(--red);
            color: white;
            border: none;
            font-weight: 700;
            text-transform: uppercase;
            cursor: pointer;
            border-radius: 8px;
            font-size: 0.9rem;
            box-shadow: 0 0 20px rgba(255, 27, 27, 0.4);
            transition: 0.3s;
        }

        .delete-btn-confirm:hover {
            background: #ff4d4d;
            transform: translateY(-2px);
        }

        .delete-btn-cancel {
            padding: 12px 30px;
            background: transparent;
            color: #aaa;
            border: 2px solid #555;
            font-weight: 700;
            text-transform: uppercase;
            cursor: pointer;
            border-radius: 8px;
            font-size: 0.9rem;
            transition: 0.3s;
        }

        .delete-btn-cancel:hover {
            border-color: white;
            color: white;
        }

        .owner-badge {
            background: linear-gradient(45deg, #ffd700, #ffaa00);
            color: black;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 800;
            margin-left: 8px;
            text-transform: uppercase;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
            display: inline-block;
            vertical-align: middle;
            letter-spacing: 1px;
        }

        .user-identity-display button:hover {
            border-color: white;
            color: white;
            background: rgba(255, 255, 255, 0.1);
        }

        /* ---- PROJECTS LIST ---- */
        .ui-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 50px;
        }

        .ui-card {
            background: linear-gradient(145deg, rgba(22, 22, 22, 0.9), rgba(14, 14, 14, 0.9));
            backdrop-filter: blur(10px);
            border-radius: 28px;
            border: 2px solid #1a1a1a;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            cursor: pointer;
            position: relative;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.6);
        }

        body.theme-scripter .ui-card {
            background: linear-gradient(145deg, rgba(15, 15, 15, 0.9), rgba(10, 10, 10, 0.9));
        }

        .ui-card.hidden {
            display: none;
        }

        .ui-card:hover {
            transform: translateY(-15px) scale(1.02);
            border-color: var(--accent);
            box-shadow: 0 25px 80px rgba(0, 0, 0, 0.8), 0 0 60px rgba(255, 27, 27, 0.3);
        }

        body.theme-scripter .ui-card:hover {
            box-shadow: 0 25px 80px rgba(0, 0, 0, 0.8), 0 0 60px rgba(255, 255, 255, 0.3);
        }

        .ui-preview {
            height: 240px;
            width: 100%;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .ui-preview-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: blur(8px);
            transition: filter 0.5s ease;
            position: absolute;
            top: 0;
            left: 0;
        }

        .ui-card:hover .ui-preview-image {
            filter: blur(0px);
        }

        .ui-content {
            padding: 32px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            background: rgba(0, 0, 0, 0.5);
            position: relative;
        }

        .tag {
            padding: 8px 16px;
            font-size: 0.75rem;
            font-weight: 700;
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.03);
            color: var(--accent);
            border: 1px solid rgba(255, 27, 27, 0.3);
            margin-right: 8px;
            margin-bottom: 8px;
            display: inline-block;
            transition: 0.3s;
        }

        .ui-card:hover .tag {
            background: rgba(255, 27, 27, 0.1);
            border-color: var(--accent);
            box-shadow: 0 0 15px rgba(255, 27, 27, 0.2);
        }

        body.theme-scripter .tag {
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        body.theme-scripter .ui-card:hover .tag {
            background: rgba(255, 255, 255, 0.1);
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.2);
        }

        .ui-card h4 {
            color: white;
            font-size: 1.6rem;
            margin-bottom: 15px;
            font-weight: 800;
            letter-spacing: 0.5px;
            transition: 0.3s;
        }

        .ui-card:hover h4 {
            color: var(--accent);
            text-shadow: 0 0 20px rgba(255, 27, 27, 0.3);
        }

        body.theme-scripter .ui-card:hover h4 {
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
        }

        .ui-card p {
            color: #aaa;
            line-height: 1.7;
            margin-bottom: 20px;
            flex-grow: 1;
            font-size: 0.95rem;
        }

        .status-badge {
            position: absolute;
            top: 20px;
            right: 20px;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 800;
            text-transform: uppercase;
            z-index: 10;
            letter-spacing: 1px;
            backdrop-filter: blur(10px);
        }

        .status-badge.completed {
            background: rgba(0, 255, 100, 0.15);
            color: #0f0;
            border: 2px solid rgba(0, 255, 100, 0.5);
            box-shadow: 0 0 20px rgba(0, 255, 100, 0.3);
        }

        .status-badge.development {
            background: rgba(255, 165, 0, 0.15);
            color: #ffa500;
            border: 2px solid rgba(255, 165, 0, 0.5);
            animation: pulseGlow 2s ease-in-out infinite;
            box-shadow: 0 0 20px rgba(255, 165, 0, 0.3);
        }

        /* NEW IDEA BADGE STYLE - NOW USES ACCENT */
        .status-badge.idea {
            background: rgba(255, 255, 255, 0.1);
            color: var(--accent);
            border: 2px solid var(--accent);
            box-shadow: 0 0 20px var(--accent);
        }

        @keyframes pulseGlow {

            0%,
            100% {
                opacity: 1;
                box-shadow: 0 0 20px rgba(255, 165, 0, 0.3);
            }

            50% {
                opacity: 0.7;
                box-shadow: 0 0 30px rgba(255, 165, 0, 0.6);
            }
        }

        .faq-container {
            max-width: 900px;
            margin: 0 auto;
        }

        .faq-item {
            background: linear-gradient(145deg, rgba(22, 22, 22, 0.9), rgba(14, 14, 14, 0.9));
            backdrop-filter: blur(10px);
            border: 2px solid #222;
            border-radius: 16px;
            margin-bottom: 20px;
            overflow: hidden;
            transition: all 0.4s ease;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
        }

        body.theme-scripter .faq-item {
            background: linear-gradient(145deg, rgba(15, 15, 15, 0.9), rgba(5, 5, 5, 0.9));
            border: 2px solid #1a1a1a;
        }

        .faq-item:hover {
            border-color: rgba(255, 27, 27, 0.5);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.7);
        }

        body.theme-scripter .faq-item:hover {
            border-color: rgba(255, 255, 255, 0.3);
        }

        .faq-item.active {
            border-color: var(--accent);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.8), 0 0 30px rgba(255, 27, 27, 0.2);
        }

        body.theme-scripter .faq-item.active {
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.8), 0 0 30px rgba(255, 255, 255, 0.2);
        }

        .faq-question {
            padding: 25px 30px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1.15rem;
            font-weight: 700;
            color: #ddd;
            user-select: none;
            position: relative;
            transition: 0.3s;
        }

        .faq-question:hover {
            color: white;
        }

        .faq-item.active .faq-question {
            color: var(--accent);
        }

        .faq-answer {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease, padding 0.4s ease;
            padding: 0 30px 0 50px;
            color: #999;
            line-height: 1.8;
            font-size: 0.98rem;
        }

        .faq-item.active .faq-answer {
            max-height: 500px;
            padding: 0 30px 25px 50px;
        }

        /* MODAL */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 20000;
            display: none;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(10px);
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .modal-overlay.active {
            display: flex;
            opacity: 1;
        }

        .modal-content {
            background: linear-gradient(145deg, #1a0000, var(--dark2));
            width: 90%;
            max-width: 700px;
            max-height: 90vh;
            border: 3px solid var(--accent);
            border-radius: 28px;
            box-shadow: 0 0 100px rgba(255, 27, 27, 0.5), 0 20px 80px rgba(0, 0, 0, 0.9);
            padding: 0;
            position: relative;
            transform: scale(0.7) translateY(50px);
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            overflow: hidden;
        }

        body.theme-scripter .modal-content {
            background: linear-gradient(145deg, #0a0a0a, #000000);
            box-shadow: 0 0 100px rgba(255, 255, 255, 0.3), 0 20px 80px rgba(0, 0, 0, 0.9);
        }

        .modal-overlay.active .modal-content {
            transform: scale(1) translateY(0);
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 25px;
            width: 45px;
            height: 45px;
            font-size: 2rem;
            color: var(--accent);
            cursor: pointer;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid rgba(255, 27, 27, 0.3);
            transition: all 0.3s ease;
        }

        body.theme-scripter .close-modal {
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .close-modal:hover {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
            box-shadow: 0 0 30px var(--accent);
            transform: rotate(90deg);
        }

        body.theme-scripter .close-modal:hover {
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.5);
        }

        .modal-header {
            height: 200px;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            border-bottom: 2px solid rgba(255, 27, 27, 0.3);
            position: relative;
            overflow: hidden;
        }

        .modal-header-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
            opacity: 0.8;
        }

        body.theme-scripter .modal-header {
            border-bottom: 2px solid rgba(255, 255, 255, 0.3);
        }

        .modal-header-icon {
            font-size: 5rem;
            color: #333;
            z-index: 2;
        }

        .modal-body {
            padding: 40px;
            overflow-y: auto;
            max-height: calc(90vh - 200px);
        }

        .modal-title {
            color: white;
            font-size: 2rem;
            margin-bottom: 15px;
            font-weight: 800;
            background: linear-gradient(90deg, var(--accent), white);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .modal-desc {
            color: #bbb;
            line-height: 1.8;
            font-size: 1.05rem;
            margin-bottom: 25px;
        }

        .modal-tags {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 25px;
            padding-top: 25px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .skills-container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 40px;
        }

        .skill-category {
            background: linear-gradient(145deg, rgba(22, 22, 22, 0.9), rgba(14, 14, 14, 0.9));
            backdrop-filter: blur(10px);
            border: 2px solid #222;
            border-radius: 20px;
            padding: 35px;
            transition: all 0.4s ease;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .skill-category:hover {
            border-color: var(--accent);
            transform: translateY(-5px);
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.7), 0 0 30px rgba(255, 27, 27, 0.2);
        }

        body.theme-scripter .skill-category:hover {
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.7), 0 0 30px rgba(255, 255, 255, 0.2);
        }

        .skill-category h3 {
            color: var(--accent);
            font-size: 1.4rem;
            margin-bottom: 25px;
            font-weight: 800;
            letter-spacing: 1px;
        }

        .skill-item {
            margin-bottom: 25px;
        }

        .skill-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .skill-name {
            color: #ddd;
            font-weight: 600;
            font-size: 0.95rem;
        }

        .skill-percentage {
            color: var(--accent);
            font-weight: 700;
            font-size: 0.95rem;
        }

        .skill-bar-container {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }

        .skill-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--accent), white);
            border-radius: 10px;
            width: 0;
            transition: width 1.5s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 0 15px var(--accent);
            position: relative;
        }

        .skill-bar::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 4px;
            height: 100%;
            background: white;
            box-shadow: 0 0 10px white;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
            margin-bottom: 60px;
        }

        .stat-card {
            background: linear-gradient(145deg, rgba(22, 22, 22, 0.9), rgba(14, 14, 14, 0.9));
            backdrop-filter: blur(10px);
            border: 2px solid #222;
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            transition: all 0.4s ease;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .stat-card:hover {
            border-color: var(--accent);
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.7), 0 0 30px rgba(255, 27, 27, 0.2);
        }

        body.theme-scripter .stat-card:hover {
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.7), 0 0 30px rgba(255, 255, 255, 0.2);
        }

        .stat-number {
            font-size: 3rem;
            font-weight: 800;
            color: var(--accent);
            text-shadow: 0 0 20px var(--accent);
            margin-bottom: 10px;
            font-variant-numeric: tabular-nums;
        }

        .stat-label {
            color: #999;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: 600;
        }

        footer {
            padding: 50px;
            text-align: center;
            background: rgba(0, 0, 0, 0.8);
            border-top: 1px solid rgba(255, 255, 255, .1);
            color: #888;
            position: relative;
            z-index: 10;
        }

        /* ---- SETTINGS MODAL STYLES REFINED ---- */
        #settings-modal .settings-content {
            max-width: 480px;
            padding: 40px;
            background: rgba(10, 10, 10, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            box-shadow: 0 20px 80px rgba(0, 0, 0, 0.8);
        }

        #settings-modal .modal-header {
            display: none;
            /* REMOVED THE BIG GEAR HEADER */
        }

        #settings-modal .modal-title {
            font-size: 1.5rem;
            text-align: center;
            margin-bottom: 40px;
            letter-spacing: 4px;
            font-weight: 300;
            background: none;
            -webkit-text-fill-color: white;
            color: white;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 15px;
            margin-top: 10px;
        }

        #settings-modal .close-modal {
            top: 20px;
            right: 20px;
            width: 35px;
            height: 35px;
            font-size: 1.5rem;
            background: transparent;
            border: none;
            box-shadow: none;
        }

        #settings-modal .close-modal:hover {
            color: var(--accent);
            background: transparent;
            box-shadow: none;
            transform: rotate(90deg) scale(1.1);
        }

        .settings-group {
            margin-bottom: 35px;
        }

        .settings-label {
            font-size: 0.8rem;
            text-transform: uppercase;
            color: #666;
            letter-spacing: 2px;
            margin-bottom: 15px;
            display: block;
            font-weight: 700;
        }

        .settings-options {
            display: flex;
            gap: 10px;
            background: rgba(255, 255, 255, 0.03);
            padding: 5px;
            border-radius: 12px;
        }

        .settings-opt-btn {
            flex: 1;
            padding: 12px;
            background: transparent;
            border: none;
            color: #888;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .settings-opt-btn:hover {
            color: white;
            background: rgba(255, 255, 255, 0.05);
        }

        .settings-opt-btn.active {
            background: rgba(255, 255, 255, 0.1);
            color: var(--accent);
            font-weight: 800;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        /* 7. ZONA OWNER STYLE */
        .owner-zone {
            display: none;
            /* Oculto por defecto */
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .owner-zone h3 {
            color: #ffd700;
            margin-bottom: 15px;
            font-size: 0.9rem;
            letter-spacing: 2px;
        }

        /* PROFILE MODAL STYLES (NEW) */
        #profile-modal .modal-content {
            max-width: 500px;
            border: 2px solid var(--accent);
        }

        #profile-modal .modal-header {
            display: none;
        }

        #profile-modal .modal-title {
            font-size: 1.5rem;
            text-align: center;
            margin-bottom: 30px;
            background: none;
            -webkit-text-fill-color: var(--accent);
            color: var(--accent);
            letter-spacing: 2px;
        }

        #profile-modal .close-modal {
            top: 20px;
            right: 20px;
            width: 35px;
            height: 35px;
            font-size: 1.5rem;
            background: transparent;
            border: none;
            box-shadow: none;
        }

        #profile-modal .close-modal:hover {
            background: transparent;
            box-shadow: none;
            transform: rotate(90deg) scale(1.1);
        }

        .form-group {
            margin-bottom: 20px;
        }

        /* Toggle Switch Style Refined */
        .setting-toggle-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(255, 255, 255, 0.03);
            padding: 20px;
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: 0.3s;
        }

        .setting-toggle-row:hover {
            background: rgba(255, 255, 255, 0.06);
            border-color: rgba(255, 255, 255, 0.1);
        }

        .setting-toggle-text {
            font-weight: 600;
            color: #ddd;
            font-size: 1rem;
        }

        .toggle-switch {
            position: relative;
            width: 52px;
            height: 28px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #222;
            transition: .4s;
            border-radius: 34px;
            border: 1px solid #444;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 3px;
            bottom: 3px;
            background-color: #888;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked+.toggle-slider {
            background-color: rgba(255, 255, 255, 0.1);
            border-color: var(--accent);
        }

        input:checked+.toggle-slider:before {
            transform: translateX(24px);
            background-color: var(--accent);
            box-shadow: 0 0 10px var(--accent);
        }

        /* ---- MOBILE RESPONSIVE ---- */
        @media (max-width: 768px) {
            #selection-screen {
                padding: 40px 20px;
                justify-content: flex-start;
                overflow-y: auto;
                height: 100vh;
                display: flex;
            }

            .select-title {
                font-size: 1.8rem;
                margin-top: 20px;
                margin-bottom: 30px;
                flex-shrink: 0;
            }

            .profile-tabs {
                padding: 5px;
                margin-bottom: 30px;
                justify-content: flex-start;
                width: 100%;
                gap: 15px;
                flex-shrink: 0;
                -webkit-overflow-scrolling: touch;
            }

            .tab-btn {
                min-width: 120px;
                padding: 15px 20px;
                font-size: 0.85rem;
            }

            .profiles-container {
                width: 100%;
                padding-bottom: 40px;
            }

            .profile-card {
                width: 100%;
                max-width: 320px;
                height: auto;
                min-height: 300px;
                margin-bottom: 20px;
                cursor: pointer;
            }

            .nav-links {
                position: fixed;
                top: 0;
                right: -100%;
                width: 75%;
                max-width: 320px;
                height: 100vh;
                background: linear-gradient(135deg, rgba(20, 0, 0, 0.98), rgba(5, 0, 0, 0.98));
                backdrop-filter: blur(20px) saturate(180%);
                flex-direction: column;
                padding: 100px 40px 40px;
                gap: 25px;
                transition: right 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
                border-left: 2px solid var(--accent);
                box-shadow: -10px 0 50px rgba(0, 0, 0, 0.8);
                align-items: flex-start;
                z-index: 999;
            }

            /* Fixed: Settings button on mobile */
            .settings-btn {
                margin-left: 0;
                width: 100%;
                border-radius: 8px;
                justify-content: flex-start;
                padding-left: 0;
                padding: 12px 15px;
                border: none;
                opacity: 0;
                transform: translateX(50px);
                background: transparent;
                order: -1;
                margin-bottom: 20px;
            }

            .nav-links.active .settings-btn {
                animation: slideInMenu 0.4s ease forwards 0.1s;
            }

            .settings-btn span {
                margin-left: 10px;
                font-size: 1.2rem;
                font-weight: 600;
                color: #aaa;
                display: inline;
            }

            .nav-profile-btn {
                margin-left: 0 !important;
                width: 100%;
                border-radius: 8px !important;
                padding: 12px 15px !important;
                order: -2;
                margin-bottom: 20px !important;
            }

            .nav-links.active {
                right: 0;
            }

            .nav-links a {
                font-size: 1.2rem;
                padding: 15px 0;
                border-bottom: 1px solid rgba(255, 255, 255, 0.05);
                opacity: 0;
                transform: translateX(50px);
                animation: slideInMenu 0.4s ease forwards;
                width: 100%;
            }

            .nav-links.active a:nth-child(1) {
                animation-delay: 0.2s;
            }

            .nav-links.active a:nth-child(2) {
                animation-delay: 0.25s;
            }

            .nav-links.active a:nth-child(3) {
                animation-delay: 0.3s;
            }

            .nav-links.active a:nth-child(4) {
                animation-delay: 0.35s;
            }

            .nav-links.active a:nth-child(5) {
                animation-delay: 0.4s;
            }

            @keyframes slideInMenu {
                to {
                    opacity: 1;
                    transform: translateX(0);
                }
            }

            .hamburger {
                display: flex;
            }

            .section-title {
                font-size: 2rem;
            }

            .team-grid {
                gap: 20px;
            }

            .team-member {
                width: 100%;
                max-width: 100%;
            }

            .tools {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            }

            .ui-list {
                grid-template-columns: 1fr;
            }

            .category-filters {
                gap: 10px;
            }

            .filter-btn {
                padding: 8px 18px;
                font-size: 0.85rem;
            }

            .skills-container {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            /* Force remove cursor elements on mobile */
            .custom-cursor {
                display: none !important;
            }
        }

        @media (min-width: 769px) {

            .profile-tabs,
            .profiles-container {
                max-width: 1200px;
                margin-left: auto;
                margin-right: auto;
            }

            #selection-screen {
                padding: 60px 40px;
            }

            .select-title {
                margin-top: 40px;
            }

            /* Hide text span in desktop settings btn */
            .settings-btn span {
                display: none;
            }
        }

        @media (min-width: 1400px) {

            .profile-tabs,
            .profiles-container {
                max-width: 1400px;
            }
        }

        /* CUSTOM CURSOR */
        .custom-cursor {
            position: fixed;
            width: 24px;
            height: 24px;
            pointer-events: none;
            z-index: 99999;
            transition: none;
            display: none;
            transform: translate(-2px, -2px);
            opacity: 1;
        }

        .cursor-arrow {
            width: 100%;
            height: 100%;
            filter: drop-shadow(0 0 6px rgba(136, 136, 136, 0.6)) drop-shadow(0 2px 4px rgba(0, 0, 0, 0.5));
            transition: filter 0.15s ease;
        }

        .custom-cursor.hovering .cursor-arrow {
            filter: drop-shadow(0 0 10px rgba(136, 136, 136, 0.8)) drop-shadow(0 4px 8px rgba(0, 0, 0, 0.7));
        }

        .custom-cursor.pointer {
            width: 28px;
            height: 28px;
            transition: width 0.15s ease, height 0.15s ease;
        }

        .custom-cursor.pointer .cursor-arrow {
            display: none;
        }

        .cursor-hand {
            width: 100%;
            height: 100%;
            display: none;
            filter: drop-shadow(0 0 8px rgba(136, 136, 136, 0.7)) drop-shadow(0 3px 6px rgba(0, 0, 0, 0.6));
        }

        .custom-cursor.pointer .cursor-hand {
            display: block;
        }

        .scroll-progress {
            position: fixed;
            top: 0;
            left: 0;
            width: 0%;
            height: 4px;
            background: linear-gradient(90deg, var(--accent), white);
            z-index: 10001;
            box-shadow: 0 0 20px var(--accent);
            transition: width 0.1s ease;
        }

        .reveal {
            opacity: 0;
            transform: translateY(50px);
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .reveal.active {
            opacity: 1;
            transform: translateY(0);
        }

        .card-3d {
            transform-style: preserve-3d;
            transition: transform 0.3s ease;
        }

        .card-3d:hover {
            transform: perspective(1000px) rotateX(var(--rotate-x, 0deg)) rotateY(var(--rotate-y, 0deg)) scale(1.05);
        }
    </style>
</head>

<body>

    <canvas id="bg-canvas"></canvas>

    <!-- LANGUAGE INTRO SCREEN (NEW) -->
    <div id="language-intro-screen">
        <div class="lang-intro-content">
            <h1 class="lang-intro-title">SELECT LANGUAGE</h1>
            <div class="lang-intro-options">
                <button class="intro-lang-btn" onclick="window.selectIntroLanguage('es')">ESPAÑOL</button>
                <span class="lang-intro-separator"></span>
                <button class="intro-lang-btn" onclick="window.selectIntroLanguage('en')">ENGLISH</button>
            </div>
        </div>
    </div>

    <div class="loader-wrapper" id="loader">
        <div class="loader-content">
            <div class="loader-text">ZEXITH STUDIOS</div>
            <div class="loader-dots">
                <div class="loader-dot"></div>
                <div class="loader-dot"></div>
                <div class="loader-dot"></div>
            </div>
        </div>
    </div>

    <div class="custom-cursor"></div>

    <!-- 10. LOGIN MODAL -->
    <div id="username-modal">
        <div class="username-content">
            <h2 id="modal-title-text" data-i18n="modal-login-title">Iniciar Sesión</h2>

            <div class="input-group">
                <input type="text" id="username-input" placeholder="Usuario / User" maxlength="20">
            </div>

            <div class="input-group password-group">
                <input type="password" id="password-input" placeholder="Contraseña / Password">
                <span class="toggle-password" onclick="togglePasswordVisibility()">👁️</span>
            </div>

            <div id="register-fields" style="display:none;"></div>

            <p class="login-error" id="login-error"
                style="display:none; color: #ff4444; margin: 10px 0; font-size:0.9rem;"></p>

            <button id="auth-action-btn" data-i18n="modal-login-btn">Entrar</button>

            <p class="switch-auth-mode" onclick="toggleAuthMode()">
                <span id="switch-auth-text">¿No tienes cuenta? Crea una</span>
            </p>
        </div>
    </div>

    <div id="delete-confirm-modal">
        <div class="delete-confirm-content">
            <h2 data-i18n="modal-del-title">Eliminar Idea</h2>
            <p data-i18n="modal-del-desc">¿Estás seguro de que deseas eliminar este concepto permanentemente? Esta
                acción no se puede deshacer.</p>
            <div class="delete-actions">
                <button class="delete-btn-cancel" onclick="closeDeleteModal()"
                    data-i18n="modal-del-cancel">Cancelar</button>
                <button class="delete-btn-confirm" id="confirm-delete-btn"
                    data-i18n="modal-del-confirm">Eliminar</button>
            </div>
        </div>
    </div>

    <!-- SETTINGS MODAL (REFINED) -->
    <div id="settings-modal" class="modal-overlay">
        <div class="modal-content settings-content">
            <button class="close-modal" onclick="closeSettings()">×</button>

            <div class="modal-body">
                <h2 class="modal-title" data-i18n="settings-title">CONFIGURACIÓN</h2>

                <div class="settings-group">
                    <span class="settings-label" data-i18n="settings-lang">IDIOMA / LANGUAGE</span>
                    <div class="settings-options">
                        <button class="settings-opt-btn" onclick="window.changeLanguage('es')"
                            data-lang-btn="es">ESPAÑOL</button>
                        <button class="settings-opt-btn" onclick="window.changeLanguage('en')"
                            data-lang-btn="en">ENGLISH</button>
                    </div>
                </div>

                <div class="settings-group">
                    <span class="settings-label" data-i18n="settings-cursor">CURSOR PERSONALIZADO</span>
                    <div class="setting-toggle-row">
                        <span class="setting-toggle-text" data-i18n="settings-cursor-label">Activar Custom Cursor</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="cursor-toggle" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>

                <!-- 7. ZONA OWNER -->
                <div class="owner-zone" id="owner-settings">
                    <h3>★ ZONA OWNER</h3>
                    <div style="margin-bottom:15px;">
                        <label style="color:#aaa; font-size:0.8rem; display:block; margin-bottom:5px;">Mensaje de Estado
                            Global:</label>
                        <input type="text" id="owner-status-input" placeholder="Escribe un estado..."
                            style="width:100%; padding:10px; background:#222; border:1px solid var(--yellow); color:white; border-radius:8px;">
                        <small style="color:#888; display:block; margin-top:5px;">💡 Tip: Los otros usuarios podrán
                            validar tu estado</small>
                    </div>
                    <button onclick="saveOwnerStatus()"
                        style="width:100%; padding:10px; background:var(--yellow); color:black; font-weight:bold; cursor:pointer; border:none; border-radius:8px;">GUARDAR
                        ESTADO</button>

                    <!-- 8A. REVIEWS SYSTEM FOR OWNER STATES -->
                    <div id="status-reviews-container"
                        style="margin-top:20px; padding-top:20px; border-top:1px solid var(--yellow);"></div>
                </div>
            </div>
        </div>
    </div>
    </div>

    <!-- PROFILE CUSTOMIZATION MODAL (NEW) -->
    <div id="profile-modal" class="modal-overlay">
        <div class="modal-content" style="max-width: 500px;">
            <button class="close-modal" onclick="closeProfileModal()">×</button>

            <div class="modal-body">
                <h2 class="modal-title" style="text-align:center;">PERSONALIZAR PERFIL</h2>

                <div
                    style="background:rgba(255,215,0,0.1); border-left:3px solid #ffd700; padding:12px; border-radius:4px; margin-bottom:20px; font-size:0.85rem; color:#ccc;">
                    <strong style="color:#ffd700;">ℹ️ Nota para Owners:</strong> Estos cambios se guardan solo en este
                    dispositivo. Copia tu configuración personalizada en otro dispositivo usando el botón de
                    exportación.
                </div>

                <div class="settings-group" style="text-align: center;">
                    <div id="profile-avatar-preview"
                        style="width:100px; height:100px; border-radius:50%; background:#222; margin:0 auto 20px; display:flex; align-items:center; justify-content:center; font-size:3rem; border:3px solid var(--accent); position:relative; overflow:hidden;">
                        <img id="avatar-img" style="width:100%; height:100%; object-fit:cover;">
                    </div>
                    <input type="file" id="profile-avatar-input" accept="image/*" style="display:none;">
                    <button onclick="document.getElementById('profile-avatar-input').click()"
                        style="width:100%; padding:10px; background:rgba(255,255,255,0.1); border:1px solid var(--accent); color:var(--accent); cursor:pointer; border-radius:8px; margin-bottom:20px; font-weight:600;">📸
                        Cambiar Foto</button>
                </div>

                <div class="form-group">
                    <label style="color:#aaa; font-size:0.85rem; display:block; margin-bottom:8px;">Nombre
                        Completo:</label>
                    <input type="text" id="profile-full-name" placeholder="Tu nombre completo..."
                        style="width:100%; padding:12px; background:#222; border:1px solid #444; color:white; border-radius:8px;">
                </div>

                <div class="form-group">
                    <label style="color:#aaa; font-size:0.85rem; display:block; margin-bottom:8px;">Descripción
                        Bio:</label>
                    <textarea id="profile-bio" placeholder="Cuéntanos sobre ti..."
                        style="width:100%; padding:12px; background:#222; border:1px solid #444; color:white; border-radius:8px; min-height:80px; resize:vertical;"></textarea>
                    <small style="color:#666; font-size:0.75rem;">Máximo 150 caracteres</small>
                </div>

                <button onclick="saveProfileChanges()"
                    style="width:100%; padding:12px; background:var(--accent); color:black; font-weight:bold; cursor:pointer; border:none; border-radius:8px; margin-top:20px;">GUARDAR
                    CAMBIOS</button>
            </div>
        </div>
    </div>

    <!-- STALE VERSION MODAL (NEW) -->
    <div id="stale-version-modal" class="modal-overlay" style="z-index:999999;">
        <div class="modal-content"
            style="max-width:450px; background:linear-gradient(145deg, #220000, #000); border-color:var(--red);">
            <div class="modal-body" style="text-align:center;">
                <h2 class="modal-title" style="color:var(--red); text-shadow:0 0 20px var(--red);">⚠️ PÁGINA OBSOLETA
                </h2>
                <p style="color:#ccc; margin:20px 0; line-height:1.6;">Se han detectado cambios en la página. Por favor,
                    recarga la página para obtener la versión más reciente.</p>
                <button onclick="window.location.reload()"
                    style="width:100%; padding:15px; background:var(--red); color:white; font-weight:800; cursor:pointer; border:none; border-radius:8px; font-size:1rem; text-transform:uppercase; letter-spacing:1px; box-shadow:0 0 20px var(--red);">🔄
                    Recargar Página</button>
            </div>
        </div>
    </div>

    <div id="selection-screen">
        <div class="select-title" data-i18n="select-profile">Selecciona Perfil</div>

        <div class="profile-tabs">
            <button class="tab-btn scripter active" data-profile="scripter">Scripter</button>
            <button class="tab-btn ui-designer" data-profile="ui-designer">UI Designer</button>
            <button class="tab-btn builder" data-profile="builder">Builder</button>
        </div>

        <div class="profiles-container">
            <div class="profile-card scripter active" id="card-santana">
                <div class="profile-avatar" style="border: 2px solid #ffffff; color:#ffffff">S</div>
                <h3>Santana</h3>
                <span>Scripter</span>
            </div>
            <div class="profile-card ui" id="card-william">
                <div class="profile-avatar" style="border: 2px solid var(--red); color:var(--red)">W</div>
                <h3>William</h3>
                <span>UI Designer</span>
            </div>
            <div class="profile-card builder" id="card-builder">
                <div class="profile-avatar" style="border: 2px solid #ffd700; color:#ffd700">B</div>
                <h3>Builder</h3>
                <span data-i18n="role-builder">Constructor</span>
            </div>
        </div>

        <div class="user-identity-display" style="margin-top: 30px; z-index: 10; text-align: center;">
            <p style="color: #888; font-size: 0.9rem; margin-bottom: 5px;" data-i18n="user-id-label">Identificado como:
            </p>
            <div style="font-size: 1.2rem; color: white; font-weight: 700; margin-bottom: 10px;">
                <span id="current-user-name">...</span>
            </div>
            <div style="display:flex; gap:10px; justify-content:center; flex-wrap:wrap;">
                <button onclick="openProfileModal()"
                    style="background: rgba(255,255,255,0.1); border: 1px solid var(--accent); color: var(--accent); padding: 8px 20px; border-radius: 20px; cursor: pointer; font-size: 0.8rem; transition: 0.3s; font-weight:600;">✏️
                    Personalizar</button>
                <button onclick="logoutUser()"
                    style="background: transparent; border: 1px solid #444; color: #aaa; padding: 8px 20px; border-radius: 20px; cursor: pointer; font-size: 0.8rem; transition: 0.3s;"
                    data-i18n="user-change-id">Cambiar ID</button>
            </div>
        </div>
    </div>

    <div class="coming-soon-screen" id="comingSoonScreen">
        <div class="coming-soon-content">
            <div class="coming-soon-title">COMING SOON</div>
            <div class="coming-soon-subtitle" data-i18n="coming-soon">Próximamente</div>
            <button class="coming-soon-back" id="backFromComingSoon" data-i18n="btn-back">← Volver</button>
        </div>
    </div>

    <div id="main-site">
        <div class="scroll-progress"></div>

        <nav id="navbar">
            <div class="nav-brand-group">
                <div class="nav-user-avatar" id="nav-user-initial">G</div>
                <div class="nav-logo">ZEXITH</div>
            </div>
            <ul class="nav-links" id="navLinks">
                <li><a href="#home" data-i18n="nav-home">Inicio</a></li>
                <li><a href="#team" data-i18n="nav-team">Equipo</a></li>
                <li><a href="#skills" data-i18n="nav-skills">Skills</a></li>
                <li><a href="#tools" data-i18n="nav-tools">Herramientas</a></li>
                <li><a href="#projects" data-i18n="nav-projects">Proyectos</a></li>
                <li><a href="#faq" data-i18n="nav-faq">FAQ</a></li>
                <!-- 3. & 4. BOTÓN PERFIL MEJORADO Y OCULTO EN MÓVIL -->
                <button class="nav-profile-btn" onclick="returnToSelection()" data-i18n="nav-change-profile">Cambiar
                    Perfil</button>

                <!-- NEW SETTINGS BUTTON -->
                <button class="settings-btn" onclick="openSettings()">
                    <!-- 2. ICONO ESTÁTICO (SOLO HOVER) -->
                    <svg viewBox="0 0 24 24">
                        <path
                            d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z" />
                    </svg>
                    <span data-i18n="nav-settings">Configuración</span>
                </button>
            </ul>
            <div class="hamburger" id="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </nav>

        <header id="home">
            <div class="hero">
                <h1 id="hero-title">ZEXITH STUDIOS</h1>
                <p id="hero-desc">...</p>
                <!-- 8. ESTADO DE OWNER -->
                <div id="hero-status-container"></div>

                <div class="badges" id="hero-badges"
                    style="margin-top:20px; display:flex; gap:10px; justify-content:center; flex-wrap:wrap;"></div>
                <a href="#projects" class="btn" data-i18n="btn-view-projects">Ver Proyectos</a>
            </div>
        </header>

        <section id="team">
            <h2 class="section-title"><span data-i18n="section-team">Nuestro Equipo</span></h2>
            <div class="team-grid">
                <div class="team-member role-ui">
                    <div class="team-avatar-container">
                        <div class="avatar-ring"></div>
                        <div class="team-avatar"
                            style="background:#220000; color:var(--red); border:3px solid var(--red);">W</div>
                    </div>
                    <div class="member-role">UI / UX Lead</div>
                    <h3 class="member-name">William</h3>
                    <p class="member-description" data-i18n="team-william-desc">Especialista en diseño de interfaces
                        futuristas y experiencias de usuario inmersivas para Roblox.</p>
                    <div class="member-socials">
                        <div class="social-icon">D</div>
                        <div class="social-icon">G</div>
                        <div class="social-icon">X</div>
                    </div>
                </div>
                <div class="team-member role-scripter">
                    <div class="team-avatar-container">
                        <div class="avatar-ring"></div>
                        <div class="team-avatar" style="background:#111111; color:#ffffff; border:3px solid #ffffff;">S
                        </div>
                    </div>
                    <div class="member-role">Lead Scripter</div>
                    <h3 class="member-name">Santana</h3>
                    <p class="member-description" data-i18n="team-santana-desc">Experto en programación Luau y
                        arquitectura de sistemas complejos para proyectos de alto rendimiento.</p>
                    <div class="member-socials">
                        <div class="social-icon">D</div>
                        <div class="social-icon">G</div>
                        <div class="social-icon">X</div>
                    </div>
                </div>
            </div>
        </section>

        <section id="skills" class="reveal">
            <h2 class="section-title"><span data-i18n="section-stats">Estadísticas & Skills</span></h2>
            <div class="stats-grid" id="stats-container"></div>
            <div class="skills-container" id="skills-container"></div>
        </section>

        <section id="tools" class="reveal">
            <h2 class="section-title"><span data-i18n="section-tools">Herramientas</span></h2>
            <div class="tools" id="tools-container"></div>
        </section>

        <section id="projects" class="reveal">
            <h2 class="section-title"><span data-i18n="section-projects">Proyectos</span></h2>
            <div class="category-filters" id="category-filters">
                <div class="filter-btn active" data-filter="all" data-i18n="filter-all">Todos</div>
                <div class="filter-btn" data-filter="completed" data-i18n="filter-completed">Completados</div>
                <div class="filter-btn" data-filter="development" data-i18n="filter-dev">En Desarrollo</div>
                <div class="filter-btn" data-filter="idea" data-i18n="filter-idea">Ideas / Conceptos</div>
            </div>

            <div class="ui-list" id="projects-container"></div>

            <div id="ideas-interface">
                <div class="ideas-form-card">
                    <h3 data-i18n="idea-share-title">Comparte tu Idea</h3>
                    <div class="form-group">
                        <input type="text" id="idea-title-input" class="idea-input"
                            placeholder="Título de tu idea futurista...">
                    </div>
                    <div class="form-group">
                        <textarea id="idea-desc-input" class="idea-input"
                            placeholder="Describe tu concepto aquí..."></textarea>
                    </div>
                    <button class="submit-idea-btn" id="submit-idea-btn" data-i18n="idea-post-btn">Publicar en el
                        Muro</button>
                </div>

                <div class="ideas-grid" id="ideas-grid">
                </div>
            </div>
        </section>

        <section id="faq" class="reveal">
            <h2 class="section-title"><span data-i18n="section-faq">Preguntas Frecuentes</span></h2>
            <div class="faq-container" id="faq-container"></div>
        </section>

        <footer>
            <p>© 2026 <span>Zexith Studios</span></p>
        </footer>
    </div>

    <div class="modal-overlay" id="projectModal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div class="modal-header">
                <div class="modal-header-icon">►</div>
            </div>
            <div class="modal-body">
                <h2 class="modal-title" id="modal-title">Titulo</h2>
                <p class="modal-desc" id="modal-desc">Descripción...</p>
                <div class="modal-tags" id="modal-tags"></div>
            </div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, onSnapshot, serverTimestamp, deleteDoc, doc, updateDoc, increment } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // --- CONFIGURACIÓN DE FIREBASE (YA INTEGRADA) ---
        const USER_FIREBASE_CONFIG = {
            apiKey: "AIzaSyBsiy12zMwHjiN2Bt9p6THBJgysw4JYliI",
            authDomain: "zexith-studios-62367.firebaseapp.com",
            projectId: "zexith-studios-62367",
            storageBucket: "zexith-studios-62367.firebasestorage.app",
            messagingSenderId: "1096402888752",
            appId: "1:1096402888752:web:088297849df6641461a5f5",
            measurementId: "G-TS2E6QNZ7E"
        };

        // --- FIREBASE / LOCAL MODE SETUP ---
        let db, auth, currentUser, appId;
        let useFirebase = false;
        let savedIdeas = []; // For Local Mode
        let userDisplayName = "Usuario Anonimo";
        let isOwner = false;
        let ideaToDeleteId = null;
        let isRegistering = false; // Toggle for Login/Register mode

        // 10. CREDENTIALS SYSTEM
        const CREDENTIALS = {
            "SantanaGVG": { pass: "Zexith209", role: "Santana", isOwner: true },
            "William": { pass: "Zexith210", role: "William", isOwner: true }
        };

        async function initSystem() {
            // Check for saved username first
            checkUsername();

            try {
                let config = null;

                // 1. Try Environment Config (Preview Mode)
                if (typeof __firebase_config !== 'undefined' && __firebase_config) {
                    config = JSON.parse(__firebase_config);
                    appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
                }
                // 2. Try User Config (GitHub/Production Mode)
                else if (typeof USER_FIREBASE_CONFIG !== 'undefined' && USER_FIREBASE_CONFIG) {
                    config = USER_FIREBASE_CONFIG;
                    appId = 'zexith-public-board'; // Fixed ID for custom deployment
                }

                if (config) {
                    const app = initializeApp(config);
                    auth = getAuth(app);
                    db = getFirestore(app);
                    useFirebase = true;

                    await initFirebaseAuth();
                } else {
                    throw new Error("No Firebase config found");
                }

            } catch (e) {
                console.log("Modo Local Activado (GitHub/Offline):", e);
                useFirebase = false;
                initLocalMode();
            }
        }

        function checkUsername() {
            const storedName = localStorage.getItem('zexith_username');
            const storedRole = localStorage.getItem('zexith_role');

            if (storedName) {
                userDisplayName = storedName;
                if (storedRole === 'owner') isOwner = true;
                updateUserDisplay(); // Update UI
            } else {
                // Show modal
                document.getElementById('username-modal').classList.add('active');
            }
        }

        function updateUserDisplay() {
            const displayEl = document.getElementById('current-user-name');
            const profile = loadProfileData();

            if (displayEl) {
                // Show full name if available, otherwise username
                const displayName = profile.fullName || userDisplayName;
                displayEl.textContent = displayName;
                // Add owner badge styling if needed locally in the display
                if (isOwner) {
                    displayEl.style.color = '#ffd700';
                    displayEl.innerHTML = displayName + ' <span style="font-size:0.5em; vertical-align:middle; border:1px solid #ffd700; padding:1px 4px; border-radius:4px;">OWNER</span>';
                } else {
                    displayEl.style.color = 'white';
                }
            }

            // 9. UPDATE NAV AVATAR
            const profile_avatar = loadProfileData().avatar;
            const avatarEl = document.getElementById('nav-user-initial');
            if (avatarEl) {
                if (profile_avatar) {
                    avatarEl.innerHTML = `<img src="${profile_avatar}" style="width:100%; height:100%; object-fit:cover; border-radius:50%;">`;
                } else {
                    const initial = userDisplayName ? userDisplayName.charAt(0).toUpperCase() : 'G';
                    avatarEl.textContent = initial;
                }
            }

            // 7. SHOW OWNER SETTINGS IF APPLICABLE
            const ownerSettings = document.getElementById('owner-settings');
            if (ownerSettings) {
                ownerSettings.style.display = isOwner ? 'block' : 'none';
            }

            // ALWAYS LOAD STATUS
            loadOwnerStatus();
        }

        // 8. OWNER STATUS LOGIC WITH REVIEWS SYSTEM
        function loadOwnerStatus() {
            const status = localStorage.getItem('zexith_owner_status');
            if (status) {
                const input = document.getElementById('owner-status-input');
                if (input) input.value = status;
                displayOwnerStatus(status);
            }
            // Load reviews for the current status
            if (isOwner) {
                displayStatusReviews();
            }
        }

        window.saveOwnerStatus = function () {
            const statusText = document.getElementById('owner-status-input').value;
            if (!statusText.trim()) {
                alert('Por favor escribe un estado');
                return;
            }

            // Save status with metadata (like ideas system)
            const statusData = {
                id: Date.now(),
                text: statusText,
                author: userDisplayName,
                timestamp: new Date(),
                validations: 0, // Like count
                reviewers: [] // Who validated it
            };

            localStorage.setItem('zexith_owner_status', statusText);
            localStorage.setItem('zexith_owner_status_data', JSON.stringify(statusData));

            displayOwnerStatus(statusText);
            displayStatusReviews(); // Refresh reviews
            alert("Estado actualizado / Status updated");
        }

        function displayStatusReviews() {
            const container = document.getElementById('status-reviews-container');
            if (!container || !isOwner) return;

            const statusDataStr = localStorage.getItem('zexith_owner_status_data');
            if (!statusDataStr) {
                container.innerHTML = '<p style="color:#888; font-size:0.9rem;">📊 Sin validaciones aún</p>';
                return;
            }

            const statusData = JSON.parse(statusDataStr);
            const reviewersText = statusData.reviewers.length > 0
                ? `Validado por: ${statusData.reviewers.join(', ')}`
                : 'Sin validaciones aún';

            container.innerHTML = `
                <h4 style="color:var(--yellow); margin-bottom:10px;">📊 Validaciones del Estado</h4>
                <div style="background:rgba(255,215,0,0.1); padding:10px; border-radius:8px; border-left:3px solid var(--yellow);">
                    <p style="color:#ccc; margin:5px 0;"><strong>${statusData.validations}</strong> validaciones</p>
                    <p style="color:#888; font-size:0.85rem; margin:5px 0;">${reviewersText}</p>
                </div>
            `;
        }

        function displayOwnerStatus(text) {
            const container = document.getElementById('hero-status-container');
            if (container) {
                if (text && text.trim()) {
                    // Get status data for reviews
                    const statusDataStr = localStorage.getItem('zexith_owner_status_data');
                    const statusData = statusDataStr ? JSON.parse(statusDataStr) : null;
                    const validations = statusData ? statusData.validations : 0;

                    // Create validation button only for non-owners
                    const validationBtn = !isOwner ? `
                        <button onclick="validateOwnerStatus()" 
                            style="margin-left:10px; padding:6px 12px; background:var(--accent); color:black; 
                                   font-weight:bold; cursor:pointer; border:none; border-radius:6px; font-size:0.8rem;">
                            ✓ Validar
                        </button>
                    ` : '';

                    container.innerHTML = `
                        <div class="owner-status-display" style="display:flex; align-items:center; justify-content:center; gap:10px;">
                            <span>📍 ${text}</span>
                            <span style="font-size:0.8rem; color:#888;">(${validations} validaciones)</span>
                            ${validationBtn}
                        </div>
                    `;
                    container.style.display = 'block';
                } else {
                    container.innerHTML = '';
                    container.style.display = 'none';
                }
            }
        }

        // 8A. OWNER STATUS VALIDATION (REVIEW SYSTEM)
        window.validateOwnerStatus = function () {
            if (!userDisplayName || userDisplayName === 'Usuario Anonimo') {
                alert('Debes iniciar sesión para validar un estado');
                return;
            }

            // Prevent self-validation
            const statusDataStr = localStorage.getItem('zexith_owner_status_data');
            if (!statusDataStr) return;

            const statusData = JSON.parse(statusDataStr);
            if (statusData.author === userDisplayName) {
                alert('No puedes validar tu propio estado');
                return;
            }

            // Check if already validated
            if (statusData.reviewers && statusData.reviewers.includes(userDisplayName)) {
                alert('Ya validaste este estado');
                return;
            }

            // Add validation
            statusData.validations = (statusData.validations || 0) + 1;
            if (!statusData.reviewers) statusData.reviewers = [];
            statusData.reviewers.push(userDisplayName);

            localStorage.setItem('zexith_owner_status_data', JSON.stringify(statusData));

            // Broadcast to other tabs
            const versionId = Date.now();
            localStorage.setItem('zexith_version_id', versionId);

            displayOwnerStatus(localStorage.getItem('zexith_owner_status'));
            if (isOwner) displayStatusReviews();
            alert('✓ Estado validado / Status validated');
        }

        window.logoutUser = function () {
            localStorage.removeItem('zexith_username');
            localStorage.removeItem('zexith_role');
            userDisplayName = "Usuario Anonimo";
            isOwner = false;
            document.getElementById('username-input').value = "";
            document.getElementById('password-input').value = "";
            document.getElementById('username-modal').classList.add('active');
            updateUserDisplay();
        }

        // --- PROFILE CUSTOMIZATION LOGIC (NEW) ---
        function loadProfileData() {
            const profile = {
                fullName: localStorage.getItem('zexith_profile_fullname') || userDisplayName,
                bio: localStorage.getItem('zexith_profile_bio') || '',
                avatar: localStorage.getItem('zexith_profile_avatar') || null
            };
            return profile;
        }

        function saveProfileData(data) {
            localStorage.setItem('zexith_profile_fullname', data.fullName);
            localStorage.setItem('zexith_profile_bio', data.bio);
            if (data.avatar) {
                localStorage.setItem('zexith_profile_avatar', data.avatar);
            }

            // Broadcast change to other tabs
            const versionId = Date.now();
            localStorage.setItem('zexith_version_id', versionId);

            updateUserDisplay();
        }

        window.openProfileModal = function () {
            const profile = loadProfileData();
            document.getElementById('profile-full-name').value = profile.fullName;
            document.getElementById('profile-bio').value = profile.bio;

            const img = document.getElementById('avatar-img');
            if (profile.avatar) {
                img.src = profile.avatar;
                img.style.display = 'block';
            } else {
                img.style.display = 'none';
            }

            document.getElementById('profile-modal').classList.add('active');
        }

        window.closeProfileModal = function () {
            document.getElementById('profile-modal').classList.remove('active');
        }

        document.getElementById('profile-avatar-input').addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (event) => {
                    const img = document.getElementById('avatar-img');
                    img.src = event.target.result;
                    img.style.display = 'block';
                };
                reader.readAsDataURL(file);
            }
        });

        window.saveProfileChanges = function () {
            const fullName = document.getElementById('profile-full-name').value.trim();
            const bio = document.getElementById('profile-bio').value.trim().substring(0, 150);
            const avatarImg = document.getElementById('avatar-img');

            if (!fullName) {
                alert('El nombre completo es requerido');
                return;
            }

            const data = {
                fullName: fullName,
                bio: bio,
                avatar: avatarImg.src && avatarImg.style.display !== 'none' ? avatarImg.src : null
            };

            saveProfileData(data);
            closeProfileModal();
            alert('Perfil actualizado / Profile updated');
        }

        // --- VERSION DETECTION (NEW) ---
        let versionId = localStorage.getItem('zexith_version_id') || 'initial';

        window.addEventListener('storage', (e) => {
            if (e.key === 'zexith_version_id' && e.newValue !== versionId) {
                versionId = e.newValue;
                // Show stale modal
                const modal = document.getElementById('stale-version-modal');
                if (modal && document.getElementById('main-site').classList.contains('visible')) {
                    modal.classList.add('active');
                    setTimeout(() => {
                        console.log('🔔 Modal de página deprecada mostrado');
                    }, 100);
                }
            }
        });

        // --- AUTH UI LOGIC ---
        window.togglePasswordVisibility = function () {
            const passInput = document.getElementById('password-input');
            if (passInput.type === 'password') {
                passInput.type = 'text';
            } else {
                passInput.type = 'password';
            }
        }

        window.toggleAuthMode = function () {
            isRegistering = !isRegistering;
            const title = document.getElementById('modal-title-text');
            const btn = document.getElementById('auth-action-btn');
            const switchText = document.getElementById('switch-auth-text');
            const errorMsg = document.getElementById('login-error');
            errorMsg.style.display = 'none';

            if (isRegistering) {
                title.textContent = "Crear Cuenta";
                btn.textContent = "Registrarse";
                switchText.textContent = "¿Ya tienes cuenta? Inicia sesión";
            } else {
                title.textContent = "Iniciar Sesión";
                btn.textContent = "Entrar";
                switchText.textContent = "¿No tienes cuenta? Crea una";
            }
        }

        document.getElementById('auth-action-btn').addEventListener('click', () => {
            const userInput = document.getElementById('username-input');
            const passInput = document.getElementById('password-input');
            const errorMsg = document.getElementById('login-error');

            const username = userInput.value.trim();
            const password = passInput.value.trim();

            if (!username) {
                errorMsg.textContent = "Ingresa un nombre de usuario";
                errorMsg.style.display = 'block';
                return;
            }

            if (isRegistering) {
                // REGISTER LOGIC (LOCAL SIMULATION)
                if (localStorage.getItem('user_' + username)) {
                    errorMsg.textContent = "El usuario ya existe";
                    errorMsg.style.display = 'block';
                } else {
                    localStorage.setItem('user_' + username, password);
                    loginSuccess(username, false);
                }
            } else {
                // LOGIN LOGIC

                // 1. Check Hardcoded Credentials (Owners)
                if (CREDENTIALS[username] && CREDENTIALS[username].pass === password) {
                    loginSuccess(CREDENTIALS[username].role, CREDENTIALS[username].isOwner);
                    return;
                }

                // 2. Check Local Registered Users
                const storedPass = localStorage.getItem('user_' + username);
                if (storedPass && storedPass === password) {
                    loginSuccess(username, false);
                } else if (!storedPass) {
                    errorMsg.textContent = "Usuario no encontrado. Crea una cuenta.";
                    errorMsg.style.display = 'block';
                } else {
                    errorMsg.textContent = "Contraseña incorrecta";
                    errorMsg.style.display = 'block';
                }
            }
        });

        function loginSuccess(name, ownerStatus) {
            userDisplayName = name;
            isOwner = ownerStatus;
            localStorage.setItem('zexith_username', userDisplayName);
            if (isOwner) localStorage.setItem('zexith_role', 'owner');
            else localStorage.removeItem('zexith_role');

            // Broadcast version change to other tabs
            const versionId = Date.now();
            localStorage.setItem('zexith_version_id', versionId);

            updateUserDisplay();
            document.getElementById('username-modal').classList.remove('active');

            // Re-render ideas to update delete buttons based on new identity
            if (useFirebase) {
                if (ownerStatus) {
                    location.reload(); // Safer reload for Owner perm update
                } else {
                    // Trigger re-fetch logic if needed, but current snapshot listener handles data.
                    // We need to re-render to update the delete buttons visibility
                    const colRef = getIdeasCollection();
                    // Force re-render not easily possible with snapshot unless we store last data.
                    // Reload is acceptable here for simplicity.
                    location.reload();
                }
            } else {
                renderIdeas(savedIdeas);
            }
        }

        async function initFirebaseAuth() {
            try {
                if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                    await signInWithCustomToken(auth, __initial_auth_token);
                } else {
                    await signInAnonymously(auth);
                }

                onAuthStateChanged(auth, (user) => {
                    if (user) {
                        currentUser = user;
                        subscribeToIdeas();
                    }
                });
            } catch (e) {
                console.error("Auth failed:", e);
            }
        }

        // --- LOCAL MODE LOGIC ---
        function initLocalMode() {
            // Mock User for local interaction
            currentUser = { uid: "local-user-id" };
            loadIdeasFromStorage();
        }

        function loadIdeasFromStorage() {
            const stored = localStorage.getItem('zexith_ideas');
            if (stored) {
                savedIdeas = JSON.parse(stored);
                // Sort by fake timestamp (newest first)
                savedIdeas.sort((a, b) => new Date(b.date) - new Date(a.date));
                renderIdeas(savedIdeas);
            }
        }

        function getIdeasCollection() {
            if (typeof __firebase_config !== 'undefined' && __firebase_config) {
                return collection(db, 'artifacts', appId, 'public', 'data', 'ideas');
            } else {
                return collection(db, 'ideas');
            }
        }

        // --- FIREBASE LOGIC ---
        function subscribeToIdeas() {
            if (!useFirebase) return;

            const colRef = getIdeasCollection();

            onSnapshot(colRef, (snapshot) => {
                const ideas = [];
                snapshot.forEach(doc => {
                    ideas.push({ id: doc.id, ...doc.data() });
                });

                // Sort by timestamp descending
                ideas.sort((a, b) => {
                    const tA = a.timestamp ? a.timestamp.seconds : 0;
                    const tB = b.timestamp ? b.timestamp.seconds : 0;
                    return tB - tA;
                });

                renderIdeas(ideas);
            }, (error) => {
                console.error("Error fetching ideas:", error);
            });
        }

        // --- RENDER FUNCTION ---
        function renderIdeas(ideas) {
            const grid = document.getElementById('ideas-grid');
            grid.innerHTML = '';

            ideas.forEach(idea => {
                // Filter out old legacy comments without username
                if (!idea.username) return;

                const card = document.createElement('div');
                card.className = 'idea-card card-3d';

                // Check ownership OR if admin
                const isPostAuthor = currentUser && idea.userId === currentUser.uid;

                // Allow delete if post author OR admin
                const canDelete = isPostAuthor || isOwner;

                const deleteBtn = canDelete ?
                    `<button class="delete-idea-btn" data-id="${idea.id}" title="Eliminar idea">🗑</button>` : '';

                // Format Timestamp
                let dateStr = "Reciente";
                if (useFirebase && idea.timestamp) {
                    dateStr = new Date(idea.timestamp.seconds * 1000).toLocaleDateString();
                } else if (!useFirebase && idea.date) {
                    dateStr = new Date(idea.date).toLocaleDateString();
                }

                // Determine Display Name and Owner Badge for the POST AUTHOR
                const displayName = idea.username || "Usuario Anónimo";
                // Check if name is exactly "William" or "Santana"
                const isDev = ['William', 'Santana'].includes(displayName);

                let userLabel = displayName;
                if (isPostAuthor) {
                    userLabel = `Tú (${displayName})`;
                }

                // Append badge if dev
                if (isDev) {
                    userLabel += ` <span class="owner-badge">OWNER</span>`;
                }

                card.innerHTML = `
                <div class="idea-header">
                    <div class="idea-user" style="${isPostAuthor ? 'color:var(--accent);' : ''}">${userLabel}</div>
                    <div style="display:flex; align-items:center;">
                        ${deleteBtn}
                    </div>
                </div>
                <div class="idea-title">${idea.title}</div>
                <div class="idea-desc idea-text-content">${idea.desc}</div>
                <div class="idea-footer">
                    <div class="idea-likes">
                        <button class="idea-like-btn" onclick="toggleLike('${idea.id}')">
                            <svg viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
                            ${idea.likes || 0}
                        </button>
                        <!-- 6. TRANSLATE BUTTON -->
                        <button class="idea-translate-btn" onclick="translateIdea(this)">Traducir / Translate</button>
                    </div>
                </div>
            `;
                grid.appendChild(card);
            });

            // Add Delete Listeners (Open Modal)
            document.querySelectorAll('.delete-idea-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    ideaToDeleteId = btn.getAttribute('data-id');
                    // Open Custom Modal
                    document.getElementById('delete-confirm-modal').classList.add('active');
                });
            });

            init3DCards();
        }

        // 5. LIKE LOGIC - With spam protection + no self-likes
        const likeTimestamps = {}; // Track last like time per idea
        const LIKE_COOLDOWN = 1000; // 1 second cooldown between likes

        window.toggleLike = async function (docId) {
            // Find the idea to check if it's the user's own idea
            let idea = null;
            if (useFirebase) {
                // Firebase mode
                try {
                    const colRef = getIdeasCollection();
                    const docRef = doc(db, colRef.path, docId);
                    const docSnap = await getDoc(docRef);
                    idea = docSnap.data();
                } catch (e) {
                    console.error('Error fetching idea:', e);
                    return;
                }
            } else {
                // Local mode
                idea = savedIdeas.find(i => i.id === docId);
            }

            if (!idea) return;

            // Prevent self-likes
            if (idea.username === userDisplayName) {
                console.warn('❌ No puedes dar like a tus propios comentarios');
                alert('No puedes dar like a tus propios comentarios');
                return;
            }

            const now = Date.now();
            const lastLike = likeTimestamps[docId] || 0;

            // Check if user is trying to spam (clicking faster than cooldown)
            if (now - lastLike < LIKE_COOLDOWN) {
                console.warn('⏱️ Espera 1 segundo antes de dar like de nuevo');
                return; // Ignore spam clicks
            }

            // Update timestamp
            likeTimestamps[docId] = now;

            if (useFirebase) {
                const colRef = getIdeasCollection();
                const docRef = doc(db, colRef.path, docId);
                await updateDoc(docRef, {
                    likes: increment(1)
                });
            } else {
                const idea = savedIdeas.find(i => i.id === docId);
                if (idea) {
                    idea.likes = (idea.likes || 0) + 1;
                    localStorage.setItem('zexith_ideas', JSON.stringify(savedIdeas));
                    renderIdeas(savedIdeas);
                }
            }
        }

        // 6. TRANSLATION LOGIC (SIMULATED)
        window.translateIdea = function (btn) {
            const card = btn.closest('.idea-card');
            const textEl = card.querySelector('.idea-text-content');

            if (textEl.classList.contains('translated')) {
                // Revert (Simple toggle for UI effect)
                textEl.style.color = '#aaa';
                btn.textContent = "Traducir / Translate";
                textEl.classList.remove('translated');
            } else {
                // Simulate Translation effect
                textEl.style.color = 'var(--accent)';
                btn.textContent = "Original";
                textEl.classList.add('translated');
                // In a real app, here we would call Google Translate API
            }
        }

        // --- DELETE MODAL LOGIC ---

        // Global function for cancel button
        window.closeDeleteModal = function () {
            document.getElementById('delete-confirm-modal').classList.remove('active');
            ideaToDeleteId = null;
        }

        // Confirm button listener
        document.getElementById('confirm-delete-btn').addEventListener('click', async () => {
            if (ideaToDeleteId) {
                if (useFirebase) {
                    await deleteIdeaFirebase(ideaToDeleteId);
                } else {
                    deleteIdeaLocal(ideaToDeleteId);
                }
                closeDeleteModal();
            }
        });

        // --- DELETE FUNCTIONS ---
        async function deleteIdeaFirebase(docId) {
            try {
                const colRef = getIdeasCollection();
                const docRef = doc(db, colRef.path, docId);
                await deleteDoc(docRef);
            } catch (e) {
                console.error("Error deleting doc: ", e);
            }
        }

        function deleteIdeaLocal(docId) {
            savedIdeas = savedIdeas.filter(idea => idea.id !== docId);
            localStorage.setItem('zexith_ideas', JSON.stringify(savedIdeas));
            renderIdeas(savedIdeas);
        }

        // --- SUBMIT FUNCTION ---
        document.getElementById('submit-idea-btn').addEventListener('click', async () => {
            const titleInput = document.getElementById('idea-title-input');
            const descInput = document.getElementById('idea-desc-input');

            const title = titleInput.value.trim();
            const desc = descInput.value.trim();

            if (title && desc && currentUser) {

                if (useFirebase) {
                    try {
                        const colRef = getIdeasCollection();
                        await addDoc(colRef, {
                            title: title,
                            desc: desc,
                            likes: 0,
                            userId: currentUser.uid,
                            username: userDisplayName, // Save Username
                            timestamp: serverTimestamp()
                        });
                    } catch (e) {
                        console.error("Error adding doc: ", e);
                    }
                } else {
                    // Local Logic
                    const newIdea = {
                        id: 'local-' + Date.now(), // Fake ID
                        title: title,
                        desc: desc,
                        likes: 0,
                        userId: currentUser.uid,
                        username: userDisplayName, // Save Username
                        date: new Date().toISOString()
                    };
                    savedIdeas.unshift(newIdea); // Add to top
                    localStorage.setItem('zexith_ideas', JSON.stringify(savedIdeas));
                    renderIdeas(savedIdeas);
                }

                titleInput.value = '';
                descInput.value = '';
            }
        });

        // --- INITIALIZATION ---

        // NEW FUNCTION: Handle Language Selection Click
        window.selectIntroLanguage = function (lang) {
            localStorage.setItem('zexith_lang', lang);
            localStorage.setItem('zexith_has_selected_lang', 'true');

            const langScreen = document.getElementById('language-intro-screen');
            langScreen.classList.add('fade-out');

            setTimeout(() => {
                langScreen.style.display = 'none';
                // Start the normal loader sequence now
                const loader = document.getElementById('loader');
                loader.style.display = 'flex'; // Ensure it's visible before fading out
                setTimeout(() => {
                    // Resume normal flow
                    startMainExperience();
                }, 100);
            }, 800);
        }

        // NEW FUNCTION: Logic for Main Experience Start (Loader -> Site)
        function startMainExperience() {
            setTimeout(() => {
                const loader = document.getElementById('loader');
                if (loader) {
                    loader.style.opacity = '0';
                    setTimeout(() => {
                        loader.remove();
                        initCursor();
                        initScrollAnimations();
                        initBackgroundAnimation();
                        initSystem();

                        // Init Language
                        const savedLang = localStorage.getItem('zexith_lang') || 'es';
                        changeLanguage(savedLang);

                        // Init Cursor State
                        const customCursorEnabled = localStorage.getItem('zexith_cursor_enabled') !== 'false';
                        document.getElementById('cursor-toggle').checked = customCursorEnabled;
                        toggleCustomCursor(customCursorEnabled);
                    }, 500);
                }
            }, 3500);
        }

        // STARTUP LOGIC
        document.addEventListener("DOMContentLoaded", () => {
            const hasSelectedLang = localStorage.getItem('zexith_has_selected_lang');
            const langScreen = document.getElementById('language-intro-screen');
            const loader = document.getElementById('loader');

            if (!hasSelectedLang) {
                // First time visit: Show Lang Screen, Hide Loader
                if (loader) loader.style.display = 'none';
                langScreen.style.display = 'flex';
            } else {
                // Returning user: Hide Lang Screen, Show Loader
                langScreen.style.display = 'none';
                if (loader) loader.style.display = 'flex';
                startMainExperience();
            }
        });

        // --- SETTINGS LOGIC ---
        window.openSettings = function () {
            document.getElementById('settings-modal').classList.add('active');
        }

        window.closeSettings = function () {
            document.getElementById('settings-modal').classList.remove('active');
        }

        // Close settings if clicking outside
        document.getElementById('settings-modal').addEventListener('click', (e) => {
            if (e.target === document.getElementById('settings-modal')) {
                closeSettings();
            }
        });

        // Close profile modal if clicking outside
        document.getElementById('profile-modal').addEventListener('click', (e) => {
            if (e.target === document.getElementById('profile-modal')) {
                closeProfileModal();
            }
        });

        function toggleCustomCursor(enabled) {
            if (enabled) {
                document.body.classList.remove('system-cursor');
                localStorage.setItem('zexith_cursor_enabled', 'true');
            } else {
                document.body.classList.add('system-cursor');
                localStorage.setItem('zexith_cursor_enabled', 'false');
            }
        }

        document.getElementById('cursor-toggle').addEventListener('change', (e) => {
            toggleCustomCursor(e.target.checked);
        });

        // --- TRANSLATION DATA ---
        const translations = {
            es: {
                "select-profile": "Selecciona Perfil",
                "role-builder": "Constructor",
                "user-id-label": "Identificado como:",
                "user-change-id": "Cambiar ID",
                "coming-soon": "Próximamente",
                "btn-back": "← Volver",
                "nav-home": "Inicio",
                "nav-team": "Equipo",
                "nav-skills": "Skills",
                "nav-tools": "Herramientas",
                "nav-projects": "Proyectos",
                "nav-faq": "FAQ",
                "nav-settings": "Configuración",
                "nav-change-profile": "Cambiar Perfil",
                "btn-view-projects": "Ver Proyectos",
                "section-team": "Nuestro Equipo",
                "team-william-desc": "Especialista en diseño de interfaces futuristas y experiencias de usuario inmersivas para Roblox.",
                "team-santana-desc": "Experto en programación Luau y arquitectura de sistemas complejos para proyectos de alto rendimiento.",
                "section-stats": "Estadísticas & Skills",
                "section-tools": "Herramientas",
                "section-projects": "Proyectos",
                "filter-all": "Todos",
                "filter-completed": "Completados",
                "filter-dev": "En Desarrollo",
                "filter-idea": "Ideas / Conceptos",
                "idea-share-title": "Comparte tu Idea",
                "idea-post-btn": "Publicar en el Muro",
                "section-faq": "Preguntas Frecuentes",
                "modal-login-title": "Iniciar Sesión",
                "modal-login-btn": "Entrar",
                "modal-del-title": "Eliminar Idea",
                "modal-del-desc": "¿Estás seguro de que deseas eliminar este concepto permanentemente? Esta acción no se puede deshacer.",
                "modal-del-cancel": "Cancelar",
                "modal-del-confirm": "Eliminar",
                "input-idea-title": "Título de tu idea futurista...",
                "input-idea-desc": "Describe tu concepto aquí...",
                "stat-projects": "Proyectos",
                "stat-exp": "Año Exp",
                "stat-sat": "Satisfacción",
                "stat-supp": "Soporte",
                "status-comp": "COMPLETADO",
                "status-dev": "EN DESARROLLO",
                "status-idea": "IDEA / CONCEPTO",
                "empty-projects-title": "No hay proyectos disponibles",
                "empty-projects-desc": "De momento no hay trabajos para mostrar. Vuelve más tarde para ver nuevos proyectos.",
                "settings-title": "CONFIGURACIÓN",
                "settings-lang": "IDIOMA / LANGUAGE",
                "settings-cursor": "CURSOR PERSONALIZADO",
                "settings-cursor-label": "Activar Custom Cursor"
            },
            en: {
                "select-profile": "Select Profile",
                "role-builder": "Builder",
                "user-id-label": "Identified as:",
                "user-change-id": "Change ID",
                "coming-soon": "Coming Soon",
                "btn-back": "← Back",
                "nav-home": "Home",
                "nav-team": "Team",
                "nav-skills": "Skills",
                "nav-tools": "Tools",
                "nav-projects": "Projects",
                "nav-faq": "FAQ",
                "nav-settings": "Settings",
                "nav-change-profile": "Change Profile",
                "btn-view-projects": "View Projects",
                "section-team": "Our Team",
                "team-william-desc": "Specialist in futuristic UI design and immersive user experiences for Roblox.",
                "team-santana-desc": "Expert in Luau programming and complex system architecture for high-performance projects.",
                "section-stats": "Stats & Skills",
                "section-tools": "Tools",
                "section-projects": "Projects",
                "filter-all": "All",
                "filter-completed": "Completed",
                "filter-dev": "In Development",
                "filter-idea": "Ideas / Concepts",
                "idea-share-title": "Share your Idea",
                "idea-post-btn": "Post to Wall",
                "section-faq": "Frequently Asked Questions",
                "modal-login-title": "Login",
                "modal-login-btn": "Enter",
                "modal-del-title": "Delete Idea",
                "modal-del-desc": "Are you sure you want to delete this concept permanently? This action cannot be undone.",
                "modal-del-cancel": "Cancel",
                "modal-del-confirm": "Delete",
                "input-idea-title": "Title of your futuristic idea...",
                "input-idea-desc": "Describe your concept here...",
                "stat-projects": "Projects",
                "stat-exp": "Year Exp",
                "stat-sat": "Satisfaction",
                "stat-supp": "Support",
                "status-comp": "COMPLETED",
                "status-dev": "IN DEVELOPMENT",
                "status-idea": "IDEA / CONCEPT",
                "empty-projects-title": "No projects available",
                "empty-projects-desc": "There are currently no works to show. Check back later for new projects.",
                "settings-title": "SETTINGS",
                "settings-lang": "IDIOMA / LANGUAGE",
                "settings-cursor": "CUSTOM CURSOR",
                "settings-cursor-label": "Enable Custom Cursor"
            }
        };

        const data = {
            william: {
                theme: 'theme-ui',
                es: {
                    title: "WILLIAM | UI DESIGNER",
                    desc: "Especialista en Interfaces de Usuario Futuristas y Experiencia de Usuario (UX) para Roblox.",
                    badges: ["Neon UI", "TweenService", "Responsive"],
                    stats: [
                        { number: "10", label: "Proyectos" },
                        { number: "1+", label: "Año Exp" },
                        { number: "98%", label: "Satisfacción" },
                        { number: "24/7", label: "Soporte" }
                    ],
                    skills: [
                        {
                            category: "Diseño UI/UX",
                            items: [
                                { name: "Figma & Prototyping", level: 95 },
                                { name: "Color Theory", level: 90 },
                                { name: "Responsive Design", level: 92 },
                                { name: "Animation Design", level: 88 }
                            ]
                        },
                        {
                            category: "Desarrollo",
                            items: [
                                { name: "TweenService", level: 85 },
                                { name: "ViewportFrames", level: 80 },
                                { name: "UI Scripting", level: 75 },
                                { name: "Performance Opt", level: 70 }
                            ]
                        }
                    ],
                    tools: [
                        // 1. IMPROVED ROBLOX LOGO
                        { name: "Roblox Studio", desc: "Implementación", img: `<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><rect x="22" y="22" width="56" height="56" rx="8" transform="rotate(-15 50 50)" fill="#00A2FF"/><rect x="38" y="38" width="24" height="24" rx="3" transform="rotate(-15 50 50)" fill="#0e0e0e"/></svg>` },
                        { name: "Figma", desc: "Prototipos & Vectores", img: `<svg viewBox="0 0 38 57" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M19 28.5C19 25.98 20 23.56 21.78 21.78C23.56 20 25.98 19 28.5 19C31.02 19 33.44 20 35.22 21.78C37 23.56 38 25.98 38 28.5C38 31.02 37 33.44 35.22 35.22C33.44 37 31.02 38 28.5 38H19V28.5Z" fill="#1ABCFE"/><path d="M0 47.5C0 44.98 1 42.56 2.78 40.78C4.56 39 6.98 38 9.5 38H19V47.5C19 50.02 18 52.44 16.22 54.22C14.44 56 12.02 57 9.5 57C6.98 57 4.56 56 2.78 54.22C1 52.44 0 50.02 0 47.5Z" fill="#0ACF83"/><path d="M19 0V19H28.5C31.02 19 33.44 18 35.22 16.22C37 14.44 38 12.02 38 9.5C38 6.98 37 4.56 35.22 2.78C33.44 1 31.02 0 28.5 0H19Z" fill="#FF7262"/><path d="M0 9.5C0 12.02 1 14.44 2.78 16.22C4.56 18 6.98 19 9.5 19H19V0H9.5C6.98 0 4.56 1 2.78 2.78C1 4.56 0 6.98 0 9.5Z" fill="#F24E1E"/><path d="M0 28.5C0 31.02 1 33.44 2.78 35.22C4.56 37 6.98 38 9.5 38H19V19H9.5C6.98 19 4.56 20 2.78 21.78C1 23.56 0 25.98 0 28.5Z" fill="#A259FF"/></svg>` },
                        { name: "Photoshop", desc: "Texturas & VFX", img: `<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><rect width="100" height="100" rx="20" fill="#001E36"/><text x="18" y="68" font-family="sans-serif" font-weight="900" font-size="55" fill="#31A8FF">P</text><text x="58" y="68" font-family="sans-serif" font-weight="900" font-size="55" fill="#31A8FF">s</text></svg>` }
                    ],
                    projects: [
                        {
                            title: "Pantalla de inicio estilo 3D",
                            desc: "Interfaz 3D de menú principal estilo retro stud. Sistema de botones interactivos con animaciones fluidas, changelog integrado y reproducción de música de fondo.",
                            tags: ["UI", "3D Menu", "Retro"],
                            status: "completed",
                            image: "https://i.imgur.com/R9OaQLH.jpg"
                        }
                    ],
                    faqs: [
                        { q: "¿Cuánto tiempo toma crear una UI completa?", a: "Depende de la complejidad del proyecto. Un menú simple puede tomar 2-3 días, mientras que sistemas complejos (tiendas, inventarios) pueden llevar 1-2 semanas." },
                        { q: "¿Trabajas con animaciones personalizadas?", a: "Sí, uso TweenService y scripts personalizados para crear animaciones fluidas y profesionales." },
                        { q: "¿Ofreces soporte post-entrega?", a: "Absolutamente. Incluyo 2 semanas de soporte gratuito para ajustes y correcciones." },
                        { q: "¿Las UIs son responsive?", a: "Todas mis interfaces están optimizadas para diferentes resoluciones y dispositivos móviles." }
                    ]
                },
                en: {
                    title: "WILLIAM | UI DESIGNER",
                    desc: "Specialist in Futuristic User Interfaces and User Experience (UX) for Roblox.",
                    badges: ["Neon UI", "TweenService", "Responsive"],
                    stats: [
                        { number: "10", label: "Projects" },
                        { number: "1+", label: "Year Exp" },
                        { number: "98%", label: "Satisfaction" },
                        { number: "24/7", label: "Support" }
                    ],
                    skills: [
                        {
                            category: "UI/UX Design",
                            items: [
                                { name: "Figma & Prototyping", level: 95 },
                                { name: "Color Theory", level: 90 },
                                { name: "Responsive Design", level: 92 },
                                { name: "Animation Design", level: 88 }
                            ]
                        },
                        {
                            category: "Development",
                            items: [
                                { name: "TweenService", level: 85 },
                                { name: "ViewportFrames", level: 80 },
                                { name: "UI Scripting", level: 75 },
                                { name: "Performance Opt", level: 70 }
                            ]
                        }
                    ],
                    tools: [
                        { name: "Roblox Studio", desc: "Implementation", img: `<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><rect x="22" y="22" width="56" height="56" rx="8" transform="rotate(-15 50 50)" fill="#00A2FF"/><rect x="38" y="38" width="24" height="24" rx="3" transform="rotate(-15 50 50)" fill="#0e0e0e"/></svg>` },
                        { name: "Figma", desc: "Prototypes & Vectors", img: `<svg viewBox="0 0 38 57" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M19 28.5C19 25.98 20 23.56 21.78 21.78C23.56 20 25.98 19 28.5 19C31.02 19 33.44 20 35.22 21.78C37 23.56 38 25.98 38 28.5C38 31.02 37 33.44 35.22 35.22C33.44 37 31.02 38 28.5 38H19V28.5Z" fill="#1ABCFE"/><path d="M0 47.5C0 44.98 1 42.56 2.78 40.78C4.56 39 6.98 38 9.5 38H19V47.5C19 50.02 18 52.44 16.22 54.22C14.44 56 12.02 57 9.5 57C6.98 57 4.56 56 2.78 54.22C1 52.44 0 50.02 0 47.5Z" fill="#0ACF83"/><path d="M19 0V19H28.5C31.02 19 33.44 18 35.22 16.22C37 14.44 38 12.02 38 9.5C38 6.98 37 4.56 35.22 2.78C33.44 1 31.02 0 28.5 0H19Z" fill="#FF7262"/><path d="M0 9.5C0 12.02 1 14.44 2.78 16.22C4.56 18 6.98 19 9.5 19H19V0H9.5C6.98 0 4.56 1 2.78 2.78C1 4.56 0 6.98 0 9.5Z" fill="#F24E1E"/><path d="M0 28.5C0 31.02 1 33.44 2.78 35.22C4.56 37 6.98 38 9.5 38H19V19H9.5C6.98 19 4.56 20 2.78 21.78C1 23.56 0 25.98 0 28.5Z" fill="#A259FF"/></svg>` },
                        { name: "Photoshop", desc: "Textures & VFX", img: `<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><rect width="100" height="100" rx="20" fill="#001E36"/><text x="18" y="68" font-family="sans-serif" font-weight="900" font-size="55" fill="#31A8FF">P</text><text x="58" y="68" font-family="sans-serif" font-weight="900" font-size="55" fill="#31A8FF">s</text></svg>` }
                    ],
                    projects: [
                        {
                            title: "3D Style Start Screen",
                            desc: "Retro stud style 3D main menu interface. Interactive button system with fluid animations, integrated changelog, and background music playback.",
                            tags: ["UI", "3D Menu", "Retro"],
                            status: "completed",
                            image: "https://i.imgur.com/R9OaQLH.jpg"
                        }
                    ],
                    faqs: [
                        { q: "How long does it take to create a full UI?", a: "It depends on the project's complexity. A simple menu can take 2-3 days, while complex systems (shops, inventories) can take 1-2 weeks." },
                        { q: "Do you work with custom animations?", a: "Yes, I use TweenService and custom scripts to create fluid and professional animations." },
                        { q: "Do you offer post-delivery support?", a: "Absolutely. I include 2 weeks of free support for adjustments and fixes." },
                        { q: "Are the UIs responsive?", a: "All my interfaces are optimized for different resolutions and mobile devices." }
                    ]
                }
            },
            santana: {
                theme: 'theme-scripter',
                es: {
                    title: "SANTANA | LEAD SCRIPTER",
                    desc: "Experto en programación Luau, sistemas complejos y arquitectura backend para Roblox.",
                    badges: ["Luau", "Backend", "Anti-Cheat"],
                    stats: [
                        { number: "12", label: "Proyectos" },
                        { number: "1+", label: "Año Exp" },
                        { number: "99%", label: "Uptime" },
                        { number: "10+", label: "Frameworks" }
                    ],
                    skills: [
                        {
                            category: "Programación",
                            items: [
                                { name: "Luau/Lua", level: 98 },
                                { name: "HTML/CSS", level: 60 },
                                { name: "Algorithm Design", level: 85 },
                                { name: "Code Optimization", level: 80 }
                            ]
                        },
                        {
                            category: "Backend & Systems",
                            items: [
                                { name: "Modules", level: 90 },
                                { name: "Anti-Exploit", level: 75 },
                                { name: "Server Architecture", level: 82 },
                                { name: "Debugging", level: 88 }
                            ]
                        }
                    ],
                    tools: [
                        { name: "VS Code", desc: "Rojo & Copilot", img: `<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><path fill="#ffffff" d="M23.1,13.6l-20.7,16L2.3,71.2l20.8,15.2l48.6-43.2L23.1,13.6z M19.4,75.9L9.1,68V32.8l10.3-7.9V75.9z"/><path fill="#ffffff" d="M74.8,11.2l-26.6,22L90.7,68l7-5.4V38.2L74.8,11.2z"/></svg>` },
                        { name: "GitHub", desc: "Control de versiones", img: `<svg viewBox="0 0 98 96" xmlns="http://www.w3.org/2000/svg"><path fill="#ffffff" fill-rule="evenodd" clip-rule="evenodd" d="M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z"/></svg>` },
                        { name: "Roblox Studio", desc: "Testing & Deploy", img: `<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><rect x="22" y="22" width="56" height="56" rx="8" transform="rotate(-15 50 50)" fill="#00A2FF"/><rect x="38" y="38" width="24" height="24" rx="3" transform="rotate(-15 50 50)" fill="#0e0e0e"/></svg>` }
                    ],
                    projects: [],
                    faqs: [
                        { q: "What programming language do you use?", a: "I work primarily with Luau (Lua optimized for Roblox), as well as TypeScript with Rojo for larger projects." },
                        { q: "How do you ensure code security?", a: "I implement server-side validation, input sanitization, and custom anti-exploit systems." },
                        { q: "Do you work with DataStores?", a: "No, not at the moment." },
                        { q: "Do you provide code documentation?", a: "All my scripts include detailed comments and technical documentation to facilitate maintenance." }
                    ]
                }
            }
        };

        // FIXED: Initialize with Santana (Scripter/White) defaults
        let currentTheme = 'santana';
        let currentLang = 'es';
        let targetColor = { r: 255, g: 255, b: 255 };

        // --- 3D BACKGROUND ANIMATION SYSTEM ---
        const canvas = document.getElementById('bg-canvas');
        const ctx = canvas.getContext('2d');
        let width, height;
        let stars = [];
        const numStars = 800;
        let centerX, centerY;

        let mouseX = 0, mouseY = 0;
        let targetMouseX = 0, targetMouseY = 0;

        class Star {
            constructor() {
                this.init();
            }
            init() {
                this.x = (Math.random() - 0.5) * width * 2;
                this.y = (Math.random() - 0.5) * height * 2;
                this.z = Math.random() * width;
                this.size = Math.random() * 2;
                this.opacity = Math.random();
            }
            update() {
                this.z -= 2;
                if (this.z <= 0) {
                    this.init();
                    this.z = width;
                }
            }
            draw() {
                let x2d = (this.x - mouseX * 0.5) * (width / this.z) + centerX;
                let y2d = (this.y - mouseY * 0.5) * (width / this.z) + centerY;
                let s = this.size * (width / this.z);

                if (s > 0 && s < 100) {
                    ctx.beginPath();
                    ctx.arc(x2d, y2d, s, 0, Math.PI * 2);
                    const alpha = Math.min(1, (width - this.z) / width) * this.opacity;
                    ctx.fillStyle = `rgba(${targetColor.r}, ${targetColor.g}, ${targetColor.b}, ${alpha})`;
                    ctx.fill();
                }
            }
        }

        function resizeCanvas() {
            width = window.innerWidth;
            height = window.innerHeight;
            canvas.width = width;
            canvas.height = height;
            centerX = width / 2;
            centerY = height / 2;
        }

        // --- NEW GRID SYSTEM ---
        function drawGrid() {
            const time = Date.now() * 0.001; // Time in seconds
            const gridSpeed = 0.5;

            ctx.lineWidth = 1;

            // Smooth Vanishing Point based on mouse
            // We move the vanishing point opposite to mouse to simulate looking around
            const vpX = centerX + (centerX - mouseX) * 0.5;
            const vpY = centerY + (centerY - mouseY) * 0.5;

            // --- VERTICAL LINES ---
            // Radiating from VP
            const numVLines = 20;
            for (let i = -numVLines; i <= numVLines; i++) {
                // X position at the bottom of the screen
                // Spread them out based on width
                // Add mouse offset to simulate movement/strafe
                const xOffset = (i * (width / 10)) + ((time * 50) % (width / 10));

                // Position at bottom of screen (z=1 approx)
                const xBase = centerX + (i * 200); // 200px spacing world units
                // Parallax shift
                const xParallax = (mouseX - centerX) * 0.5;

                const xBottom = xBase - xParallax;

                const grad = ctx.createLinearGradient(vpX, vpY, xBottom, height);
                grad.addColorStop(0, `rgba(${targetColor.r}, ${targetColor.g}, ${targetColor.b}, 0)`); // Fade out at horizon
                grad.addColorStop(0.2, `rgba(${targetColor.r}, ${targetColor.g}, ${targetColor.b}, 0.1)`);
                grad.addColorStop(1, `rgba(${targetColor.r}, ${targetColor.g}, ${targetColor.b}, 0.3)`);

                ctx.strokeStyle = grad;

                // Floor Vertical
                ctx.beginPath();
                ctx.moveTo(vpX, vpY);
                ctx.lineTo(xBottom, height);
                ctx.stroke();

                // Ceiling Vertical (Mirror)
                const gradCeil = ctx.createLinearGradient(vpX, vpY, xBottom, 0);
                gradCeil.addColorStop(0, `rgba(${targetColor.r}, ${targetColor.g}, ${targetColor.b}, 0)`);
                gradCeil.addColorStop(0.2, `rgba(${targetColor.r}, ${targetColor.g}, ${targetColor.b}, 0.1)`);
                gradCeil.addColorStop(1, `rgba(${targetColor.r}, ${targetColor.g}, ${targetColor.b}, 0.3)`);

                ctx.strokeStyle = gradCeil;

                ctx.beginPath();
                ctx.moveTo(vpX, vpY);
                ctx.lineTo(xBottom, 0);
                ctx.stroke();
            }

            // --- HORIZONTAL LINES ---
            // Moving towards viewer
            const numHLines = 15;
            // Animation loop 0 to 1
            const loopPhase = (time * gridSpeed) % 1;

            for (let i = 0; i < numHLines; i++) {
                // Z depth logic: 
                // We want lines to come from Z=Infinity (Horizon) to Z=1 (Screen)
                // A simple geometric series or 1/x looks best

                // Normalized position 0 to 1 (0 = horizon, 1 = bottom)

                const t = (i + loopPhase) / numHLines; // 0.0 to 1.0 moving
                const p = Math.pow(t, 3); // Curve for perspective (higher power = more bunching at horizon)

                const yOffset = p * (height / 2);
                const alpha = p * 0.5; // Fade out near horizon

                ctx.strokeStyle = `rgba(${targetColor.r}, ${targetColor.g}, ${targetColor.b}, ${alpha})`;

                // Floor
                if (yOffset > 1) { // Don't draw exactly on horizon pixel
                    ctx.beginPath();
                    ctx.moveTo(0, vpY + yOffset);
                    ctx.lineTo(width, vpY + yOffset);
                    ctx.stroke();
                }

                // Ceiling
                if (yOffset > 1) {
                    ctx.beginPath();
                    ctx.moveTo(0, vpY - yOffset);
                    ctx.lineTo(width, vpY - yOffset);
                    ctx.stroke();
                }
            }
        }

        function initBackgroundAnimation() {
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);

            for (let i = 0; i < numStars; i++) {
                stars.push(new Star());
            }

            window.addEventListener('mousemove', (e) => {
                targetMouseX = (e.clientX - centerX) * 0.5;
                targetMouseY = (e.clientY - centerY) * 0.5;
            });

            requestAnimationFrame(animateBackground);
        }

        function animateBackground() {
            ctx.clearRect(0, 0, width, height);

            // Update mouse smoothing
            mouseX += (targetMouseX - mouseX) * 0.05;
            mouseY += (targetMouseY - mouseY) * 0.05;

            // Draw 3D Grid first (behind stars)
            drawGrid();

            // Draw Stars
            stars.forEach(star => {
                star.update();
                star.draw();
            });

            requestAnimationFrame(animateBackground);
        }

        // --- COLOR TRANSITIONS ---
        function updateThemeColor(profile) {
            if (profile === 'scripter') {
                targetColor = { r: 255, g: 255, b: 255 };
            } else if (profile === 'ui-designer') {
                targetColor = { r: 255, g: 27, b: 27 };
            } else if (profile === 'builder') {
                targetColor = { r: 255, g: 215, b: 0 };
            }
        }

        // --- LANGUAGE LOGIC ---
        window.changeLanguage = function (lang) {
            currentLang = lang;
            localStorage.setItem('zexith_lang', lang);

            // Update HTML tag
            document.documentElement.lang = lang;

            // Update Selector UI (NOW IN SETTINGS)
            document.querySelectorAll('.settings-opt-btn').forEach(btn => {
                if (btn.getAttribute('data-lang-btn') === lang) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });

            // Update Static Text
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (translations[lang][key]) {
                    // If it's an input with placeholder
                    if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
                        el.placeholder = translations[lang][key];
                    } else {
                        el.innerText = translations[lang][key];
                    }
                }
            });

            // Update Dynamic Content (Profile Data) if a profile is currently visible
            if (document.getElementById('main-site').classList.contains('visible') || document.getElementById('main-site').style.display === 'block') {
                // Reload current profile with new lang
                enterSite(currentTheme, true); // True for "update only" mode
            }
        }

        // --- EXISTING LOGIC ---

        const tabBtns = document.querySelectorAll('.tab-btn');
        const profileCards = document.querySelectorAll('.profile-card');

        tabBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                const profile = btn.getAttribute('data-profile');
                updateThemeColor(profile);

                tabBtns.forEach(tab => tab.classList.remove('active'));
                btn.classList.add('active');

                profileCards.forEach(card => {
                    card.classList.remove('active');
                });

                if (profile === 'scripter') {
                    document.getElementById('card-santana').classList.add('active');
                } else if (profile === 'ui-designer') {
                    document.getElementById('card-william').classList.add('active');
                } else if (profile === 'builder') {
                    document.getElementById('card-builder').classList.add('active');
                }
            });
        });

        document.getElementById('card-william').addEventListener('click', () => {
            enterSite('william');
        });

        document.getElementById('card-santana').addEventListener('click', () => {
            enterSite('santana');
        });

        // Mobile fix: ensure touchend also works
        document.getElementById('card-santana').addEventListener('touchend', (e) => {
            e.preventDefault();
            enterSite('santana');
        });

        document.getElementById('card-william').addEventListener('touchend', (e) => {
            e.preventDefault();
            enterSite('william');
        });

        document.getElementById('card-builder').addEventListener('click', () => {
            updateThemeColor('builder');
            showComingSoon();
        });

        document.getElementById('card-builder').addEventListener('touchend', (e) => {
            e.preventDefault();
            updateThemeColor('builder');
            showComingSoon();
        });

        function showComingSoon() {
            const comingSoon = document.getElementById('comingSoonScreen');
            comingSoon.classList.add('active');
        }

        document.getElementById('backFromComingSoon').addEventListener('click', () => {
            const comingSoon = document.getElementById('comingSoonScreen');
            comingSoon.classList.remove('active');
        });

        function returnToSelection() {
            const main = document.getElementById('main-site');
            const selection = document.getElementById('selection-screen');

            // 1. Fade out main
            main.classList.remove('visible');

            // 2. Wait for transition
            setTimeout(() => {
                main.style.display = 'none';

                // 3. Show selection
                selection.style.display = 'flex';
                selection.style.transform = 'none'; // RESET TRANSFORM HERE

                // Force reflow/repaint to ensure transition works
                void selection.offsetWidth;
                selection.classList.remove('fade-out');

                // 4. Reset scroll
                window.scrollTo(0, 0);

                // 5. Reset animations for next time
                document.querySelectorAll('.reveal.active').forEach(el => el.classList.remove('active'));

                // 6. Reset navbar state
                document.getElementById('navbar').classList.remove('scrolled');

            }, 500);
        }

        function enterSite(profile, updateOnly = false) {
            currentTheme = profile;
            const profileData = data[profile];

            if (!profileData) return;

            // GET LANGUAGE SPECIFIC DATA
            const info = profileData[currentLang];

            updateThemeColor(profileData.theme === 'theme-ui' ? 'ui-designer' : 'scripter'); // Fix color sync

            // IMPORTANT: Ensure body class is set correctly
            document.body.className = profileData.theme;

            loadProfile(info);

            if (!updateOnly) {
                const main = document.getElementById('main-site');
                const selection = document.getElementById('selection-screen');

                main.style.display = 'block';

                // Execute transitions immediately for snappier feel
                setTimeout(() => {
                    selection.classList.add('fade-out');
                    main.classList.add('visible');
                }, 10);

                // Cleanup after transition (0.5s)
                setTimeout(() => {
                    selection.style.display = 'none';
                    initCursor(); // Ensure cursor is active
                    init3DCards();
                }, 500);
            }
        }

        function loadProfile(info) {
            document.getElementById('hero-title').textContent = info.title;
            document.getElementById('hero-desc').textContent = info.desc;

            const badgesArea = document.getElementById('hero-badges');
            badgesArea.innerHTML = info.badges.map(b => `<div class="badge" style="border-color:var(--accent); color:var(--accent)">${b}</div>`).join('');

            const statsArea = document.getElementById('stats-container');
            statsArea.innerHTML = info.stats.map(stat => `
            <div class="stat-card">
                <div class="stat-number" data-target="${stat.number}">0</div>
                <div class="stat-label">${stat.label}</div>
            </div>
        `).join('');

            const skillsArea = document.getElementById('skills-container');
            skillsArea.innerHTML = info.skills.map(category => `
            <div class="skill-category">
                <h3>${category.category}</h3>
                ${category.items.map(skill => `
                    <div class="skill-item">
                        <div class="skill-header">
                            <span class="skill-name">${skill.name}</span>
                            <span class="skill-percentage">${skill.level}%</span>
                        </div>
                        <div class="skill-bar-container">
                            <div class="skill-bar" data-level="${skill.level}"></div>
                        </div>
                    </div>
                `).join('')}
            </div>
        `).join('');

            setTimeout(() => {
                animateStats();
                animateSkillBars();
            }, 500);

            const toolsArea = document.getElementById('tools-container');
            toolsArea.innerHTML = info.tools.map(t => `
            <div class="tool">
                <span class="edge-line edge-top"></span><span class="edge-line edge-right"></span>
                <span class="edge-line edge-bottom"></span><span class="edge-line edge-left"></span>
                <div class="tool-content">
                    <div class="tool-icon">${t.img}</div>
                    <h4>${t.name}</h4>
                    <span>${t.desc}</span>
                </div>
            </div>
        `).join('');

            const projArea = document.getElementById('projects-container');
            if (info.projects.length === 0) {
                projArea.innerHTML = `
                <div style="grid-column: 1 / -1; text-align: center; padding: 80px 20px;">
                    <div style="font-size: 3rem; margin-bottom: 20px; opacity: 0.3;">📦</div>
                    <h3 style="font-size: 2rem; color: var(--accent); margin-bottom: 15px; font-weight: 800;">${translations[currentLang]['empty-projects-title']}</h3>
                    <p style="color: #999; font-size: 1.1rem;">${translations[currentLang]['empty-projects-desc']}</p>
                </div>
            `;
            } else {
                projArea.innerHTML = info.projects.map(p => {
                    // Determine Status Badge Text based on Lang
                    let statusText = '';
                    if (p.status === 'completed') statusText = translations[currentLang]['status-comp'];
                    else if (p.status === 'development') statusText = translations[currentLang]['status-dev'];
                    else statusText = translations[currentLang]['status-idea'];

                    return `
                <div class="ui-card" data-title="${p.title}" data-desc="${p.desc}" data-status="${p.status}">
                    <div class="ui-preview">
                        <div class="status-badge ${p.status}">${statusText}</div>
                        ${p.image ? `<img src="${p.image}" alt="${p.title}" class="ui-preview-image">` : '<div class="preview-icon">▶</div>'}
                    </div>
                    <div class="ui-content">
                        <h4>${p.title}</h4>
                        <p>${p.desc}</p>
                        <div class="ui-tags">${p.tags.map(tag => `<div class="tag">${tag}</div>`).join('')}</div>
                    </div>
                </div>
            `}).join('');
            }

            const faqArea = document.getElementById('faq-container');
            faqArea.innerHTML = info.faqs.map(faq => `
            <div class="faq-item">
                <div class="faq-question">
                    <span>${faq.q}</span>
                    <div class="faq-icon-wrapper">
                        <span class="faq-icon">+</span>
                    </div>
                </div>
                <div class="faq-answer">${faq.a}</div>
            </div>
        `).join('');
        }

        function animateStats() {
            const statNumbers = document.querySelectorAll('.stat-number');
            statNumbers.forEach(stat => {
                const target = stat.getAttribute('data-target');
                const isNumber = !isNaN(parseInt(target));

                if (isNumber) {
                    const value = parseInt(target);
                    const duration = 2000;
                    const increment = value / (duration / 16);
                    let current = 0;

                    const counter = setInterval(() => {
                        current += increment;
                        if (current >= value) {
                            stat.textContent = target;
                            clearInterval(counter);
                        } else {
                            stat.textContent = Math.floor(current) + (target.includes('+') ? '+' : '');
                        }
                    }, 16);
                } else {
                    stat.textContent = target;
                }
            });
        }

        function animateSkillBars() {
            const skillBars = document.querySelectorAll('.skill-bar');
            skillBars.forEach((bar, index) => {
                setTimeout(() => {
                    const level = bar.getAttribute('data-level');
                    bar.style.width = level + '%';
                }, index * 100);
            });
        }

        let cursorInitialized = false;
        function initCursor() {
            const isTouchDevice = ('ontouchstart' in window) || (navigator.maxTouchPoints > 0);

            if (isTouchDevice) {
                return;
            }

            const cursor = document.querySelector('.custom-cursor');

            // Initial setup only once
            if (!cursorInitialized) {
                const arrowSVG = `
                <svg class="cursor-arrow" viewBox="0 0 24 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M5.5 3L20.5 16L13 16.5L10 28L5.5 3Z" fill="white" stroke="#888888" stroke-width="1.5" stroke-linejoin="round"/>
                </svg>
            `;

                const handSVG = `
                <svg class="cursor-hand" viewBox="0 0 24 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M9 10V5C9 3.89543 9.89543 3 11 3C12.1046 3 13 3.89543 13 5V10M13 10V4C13 2.89543 13.8954 2 15 2C16.1046 2 17 2.89543 17 4V10M17 10V5C17 3.89543 17.8954 3 19 3C20.1046 3 21 3.89543 21 5V13C21 13 21 14 21 15C21 18 20 21 17 24C14 27 10 28 7 27C5 26.5 4 25 4 23V15C4 13.8954 4.89543 13 6 13C7.10457 13 8 13.8954 8 15V12C8 10.8954 8.89543 10 10 10C10.5523 10 11 10.4477 11 11" fill="white" stroke="#888888" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            `;

                cursor.innerHTML = arrowSVG + handSVG;
                cursor.style.display = 'block';

                let mouseX = 0, mouseY = 0;

                document.addEventListener('mousemove', (e) => {
                    mouseX = e.clientX;
                    mouseY = e.clientY;
                    cursor.style.left = mouseX + 'px';
                    cursor.style.top = mouseY + 'px';
                });

                cursorInitialized = true;
            }

            function updateClickables() {
                // Updated list of clickables including settings elements
                const clickables = document.querySelectorAll('a, button, .tab-btn, .profile-card, .ui-card, .faq-question, [role="button"], .btn, .filter-btn, .hamburger, .nav-links a, .close-modal, .nav-profile-btn, #card-william, #card-santana, #card-builder, .coming-soon-back, #submit-idea-btn, .idea-input, .intro-lang-btn, .settings-btn, .settings-opt-btn, .toggle-slider');

                clickables.forEach(el => {
                    el.addEventListener('mouseenter', () => {
                        cursor.classList.add('pointer');
                        cursor.classList.remove('hovering');
                    });
                    el.addEventListener('mouseleave', () => {
                        cursor.classList.remove('pointer');
                        cursor.classList.remove('hovering');
                    });
                });
            }

            updateClickables();
            setTimeout(updateClickables, 1500); // Re-run shortly after DOM updates
        }

        function updateScrollProgress() {
            const scrollProgress = document.querySelector('.scroll-progress');
            const scrollTop = window.scrollY;
            const docHeight = document.documentElement.scrollHeight - window.innerHeight;
            const scrollPercent = (scrollTop / docHeight) * 100;
            scrollProgress.style.width = scrollPercent + '%';
        }

        window.addEventListener('scroll', updateScrollProgress);

        function initScrollAnimations() {
            const reveals = document.querySelectorAll('.reveal');

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('active');
                    }
                });
            }, { threshold: 0.1 });

            reveals.forEach(reveal => observer.observe(reveal));
        }

        function init3DCards() {
            const cards = document.querySelectorAll('.ui-card, .team-member, .skill-category, .ideas-form-card, .idea-card');

            cards.forEach(card => {
                card.classList.add('card-3d');

                card.addEventListener('mousemove', (e) => {
                    const rect = card.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;

                    const centerX = rect.width / 2;
                    const centerY = rect.height / 2;

                    const rotateX = ((y - centerY) / centerY) * -10;
                    const rotateY = ((x - centerX) / centerX) * 10;

                    card.style.setProperty('--rotate-x', rotateX + 'deg');
                    card.style.setProperty('--rotate-y', rotateY + 'deg');
                });

                card.addEventListener('mouseleave', () => {
                    card.style.setProperty('--rotate-x', '0deg');
                    card.style.setProperty('--rotate-y', '0deg');
                });
            });
        }

        window.addEventListener('scroll', () => {
            const navbar = document.getElementById('navbar');
            const links = document.querySelectorAll('.nav-links a');

            if (window.scrollY > 50) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }

            const sections = document.querySelectorAll('section');
            let current = '';

            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.clientHeight;
                if (window.scrollY >= sectionTop - 100) {
                    current = section.getAttribute('id');
                }
            });

            links.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === `#${current}`) {
                    link.classList.add('active');
                }
            });
        });

        const hamburger = document.getElementById('hamburger');
        const navLinks = document.getElementById('navLinks');

        hamburger.addEventListener('click', () => {
            hamburger.classList.toggle('active');
            navLinks.classList.toggle('active');
        });

        document.querySelectorAll('.nav-links a').forEach(link => {
            link.addEventListener('click', () => {
                hamburger.classList.remove('active');
                navLinks.classList.remove('active');
            });
        });

        document.getElementById('category-filters').addEventListener('click', (e) => {
            if (e.target.classList.contains('filter-btn')) {
                document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
                e.target.classList.add('active');

                const filter = e.target.getAttribute('data-filter');
                const projectsContainer = document.getElementById('projects-container');
                const ideasInterface = document.getElementById('ideas-interface');
                const cards = document.querySelectorAll('.ui-card');

                if (filter === 'idea') {
                    // Show Ideas Interface
                    projectsContainer.style.display = 'none';
                    ideasInterface.style.display = 'flex';
                } else {
                    // Show Projects Grid
                    projectsContainer.style.display = 'grid';
                    ideasInterface.style.display = 'none';

                    cards.forEach(card => {
                        if (filter === 'all') {
                            card.classList.remove('hidden');
                        } else {
                            const status = card.getAttribute('data-status');
                            if (status === filter) {
                                card.classList.remove('hidden');
                            } else {
                                card.classList.add('hidden');
                            }
                        }
                    });
                }
            }
        });

        document.getElementById('faq-container').addEventListener('click', (e) => {
            const question = e.target.closest('.faq-question');
            if (question) {
                const faqItem = question.parentElement;
                faqItem.classList.toggle('active');
            }
        });

        const modal = document.getElementById('projectModal');
        const closeBtn = document.querySelector('.close-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalDesc = document.getElementById('modal-desc');
        const modalTags = document.getElementById('modal-tags');

        document.getElementById('projects-container').addEventListener('click', function (e) {
            const card = e.target.closest('.ui-card');
            if (card) {
                const modalHeaderIcon = document.querySelector('.modal-header-icon');
                const modalHeader = document.querySelector('.modal-header');

                modalTitle.textContent = card.getAttribute('data-title');
                modalDesc.textContent = card.getAttribute('data-desc');
                modalTags.innerHTML = card.querySelector('.ui-tags').innerHTML;

                const imageElement = card.querySelector('.ui-preview-image');
                const existingImage = modalHeader.querySelector('.modal-header-image');

                if (existingImage) existingImage.remove();

                if (imageElement && imageElement.src) {
                    const modalImage = document.createElement('img');
                    modalImage.src = imageElement.src;
                    modalImage.className = 'modal-header-image';
                    modalImage.alt = card.getAttribute('data-title');
                    modalHeader.appendChild(modalImage);
                    modalHeaderIcon.style.display = 'none';
                } else {
                    modalHeaderIcon.style.display = 'block';
                }

                modal.style.display = 'flex';
                setTimeout(() => { modal.classList.add('active'); }, 10);
            }
        });

        function closeModal() {
            modal.classList.remove('active');
            setTimeout(() => { modal.style.display = 'none'; }, 400);
        }

        closeBtn.addEventListener('click', closeModal);
        modal.addEventListener('click', (e) => { if (e.target === modal) closeModal(); });

        // Assign global functions
        window.returnToSelection = returnToSelection;
    </script>

</body>

</html>
